(this.webpackJsonpclient = this.webpackJsonpclient || []).push([[0], { 48: function (e, t, c) { }, 49: function (e, t, c) { }, 50: function (e, t, c) { }, 51: function (e, t, c) { }, 52: function (e, t, c) { }, 53: function (e, t, c) { }, 54: function (e, t, c) { }, 55: function (e, t, c) { "use strict"; c.r(t); var a = c(2), n = c.n(a), s = c(25), r = c.n(s), i = c(9), l = c(6), o = c(3), d = c(1), j = Object(a.createContext)(null), b = function (e) { var t = e.children, c = Object(a.useState)(""), n = Object(o.a)(c, 2), s = n[0], r = n[1]; return Object(d.jsx)(j.Provider, { value: { pathname: s, setPathname: r }, children: t }) }, u = c(5), h = { skryfallURL: "https://api.scryfall.com", serverURL: "https://magicfind-server.onrender.com" }, m = Object(a.createContext)(null), O = function (e) { var t = e.children, c = Object(a.useState)(null), n = Object(o.a)(c, 2), s = n[0], r = n[1], i = Object(a.useState)(!1), j = Object(o.a)(i, 2), b = (j[0], j[1], Object(a.useState)(null)), h = Object(o.a)(b, 2), O = h[0], p = h[1], f = Object(l.o)(), x = Object(l.q)(), g = function () { localStorage.clear(), r(null), x("/") }; return Object(a.useEffect)((function () { var e = localStorage.getItem("token"); if (e) if (function (e) { return 1e3 * JSON.parse(atob(null === e || void 0 === e ? void 0 : e.split(".")[1])).exp < (new Date).getTime() }(e)) g(); else if (localStorage.getItem("user")) { var t = JSON.parse(localStorage.getItem("user")), c = JSON.parse(localStorage.getItem("token")); r(Object(u.a)(Object(u.a)({}, t), {}, { token: c })), x(f.pathname) } }), []), Object(d.jsx)(m.Provider, { value: { auth: s, setAuth: r, unreadMail: O, setUnreadMail: p, logoutAction: g }, children: t }) }, p = function () { return Object(a.useContext)(m) }, f = Object(a.createContext)(null), x = function (e) { var t = e.children, c = p().auth, n = Object(a.useState)([]), s = Object(o.a)(n, 2), r = s[0], i = s[1], l = Object(a.useState)([]), j = Object(o.a)(l, 2), b = j[0], u = j[1]; return Object(a.useEffect)((function () { var e, t; c && (i(null === (e = c.messages) || void 0 === e ? void 0 : e.sent), u(null === (t = c.messages) || void 0 === t ? void 0 : t.received)) }), [c]), Object(d.jsx)(f.Provider, { value: { setSentMessages: i, sentMessages: r, setReceivedMessages: u, receivedMessages: b }, children: t }) }, g = Object(a.createContext)(null), v = function (e) { var t = e.children, c = Object(a.useState)(null), n = Object(o.a)(c, 2), s = n[0], r = n[1], i = Object(a.useState)(""), l = Object(o.a)(i, 2), j = l[0], b = l[1], u = Object(a.useState)(""), h = Object(o.a)(u, 2), m = h[0], O = h[1], f = Object(a.useState)(null), x = Object(o.a)(f, 2), v = x[0], y = x[1], N = Object(a.useState)(null), S = Object(o.a)(N, 2), w = S[0], k = S[1], C = Object(a.useState)(!1), A = Object(o.a)(C, 2), E = A[0], I = A[1], q = Object(a.useState)(!1), R = Object(o.a)(q, 2), T = R[0], F = R[1], P = Object(a.useState)([]), D = Object(o.a)(P, 2), z = D[0], M = D[1], L = Object(a.useState)([]), J = Object(o.a)(L, 2), U = J[0], H = J[1], B = Object(a.useState)(!1), G = Object(o.a)(B, 2), Q = G[0], Z = G[1], Y = Object(a.useState)(-1), X = Object(o.a)(Y, 2), K = X[0], W = X[1], V = p().auth; return Object(d.jsx)(g.Provider, { value: { errorMessage: w, setErrorMessage: k, marker: K, setMarker: W, loading: Q, setLoading: Z, hasLoaded: E, setHasLoaded: I, cardNames: U, setCardNames: H, apiCards: v, setApiCards: y, searchInput: s, setSearchInput: r, searchTerm: m, setSearchTerm: O, cardName: j, setCardName: b, predictions: z, setPredictions: M, filterUserCards: function (e) { var t = []; return e.forEach((function (e) { e.userID !== V.id && t.push(e) })), t }, filterCardNames: function (e) { var t = []; return e.forEach((function (e) { !t.includes(e.name) && t.push(e.name) })), t }, displayAutcomplete: T, setDisplayAutocomplete: F }, children: t }) }, y = Object(a.createContext)(null), N = function (e) { var t = e.children, c = Object(a.useState)([]), n = Object(o.a)(c, 2), s = n[0], r = n[1], i = Object(a.useState)(0), l = Object(o.a)(i, 2), j = l[0], b = l[1], u = Object(a.useState)(0), h = Object(o.a)(u, 2); h[0], h[1]; return Object(a.useEffect)((function () { j && localStorage.setItem("shopping-cart-items", JSON.stringify(j)) }), [j]), Object(a.useEffect)((function () { var e = 0; s.forEach((function (t) { e += parseInt(t.quantity_selected) })), b(e), s.length > 0 && localStorage.setItem("shopping-cart", JSON.stringify(s)) }), [s]), Object(a.useEffect)((function () { localStorage.getItem("shopping-cart") && (r(JSON.parse(localStorage.getItem("shopping-cart"))), b(JSON.parse(localStorage.getItem("shopping-cart-items")))) }), []), Object(d.jsx)(y.Provider, { value: { cartItems: s, setCartItems: r, itemsCount: j, setItemsCount: b }, children: t }) }, S = function (e) { var t = e.prediction, c = e.index, n = Object(a.useContext)(g), s = n.marker, r = n.searchTerm, i = n.setCardName, l = function (e) { var t = e.prediction, c = e.searchTerm, a = t.toLowerCase().indexOf(c.toLowerCase()), n = a + c.length, s = t.substring(0, a), r = t.substring(a, n), i = t.substring(n, t.length); return Object(d.jsxs)("span", { children: [s, Object(d.jsx)("strong", { children: r }), i] }) }; return Object(d.jsx)("li", { id: t, className: c === s ? "prediction bg-grey" : "prediction", onMouseEnter: function (e) { e.target.classList.add("bg-grey"), i(t) }, onMouseOut: function (e) { e.target.classList.remove("bg-grey") }, children: Object(d.jsx)(l, { searchTerm: r, prediction: t }) }) }, w = function (e) { var t = e.predictions, c = e.searchCard, n = Object(a.useContext)(g), s = n.marker, r = n.setMarker, i = n.searchTerm, l = n.setCardName, j = n.displayAutcomplete, b = Object(a.useState)(-200), u = Object(o.a)(b, 2), h = u[0], m = u[1], O = Object(a.useRef)(null); Object(a.useEffect)((function () { return document.addEventListener("keydown", p), function () { return document.removeEventListener("keydown", p) } })), Object(a.useEffect)((function () { m(-200) }), [i]), Object(a.useEffect)((function () { l(t[s]), O.current.scrollTo({ top: h, behavior: "smooth" }) }), [s]); var p = function (e) { var c; t && ("ArrowDown" === e.key && s < t.length - 1 && (m(h + 40), r(s + 1)), "ArrowUp" === e.key && (null === O || void 0 === O || null === (c = O.current) || void 0 === c || c.scrollIntoView(!0), (s === t.length - 1 || s >= 0) && (m(h - 40), r(s - 1)))) }; return Object(d.jsx)("ul", { id: "autocomplete-list", className: "autocomplete-list", onMouseDown: function (e) { c(e, e.target.id) }, ref: O, children: j && (null === t || void 0 === t ? void 0 : t.map((function (e, t) { return Object(d.jsx)(S, { index: t, marker: s, prediction: e }, t) }))) }) }, k = Object(a.forwardRef)((function (e, t) { var c = e.id, n = e.isActive, s = e.searchCard, r = t, i = Object(a.useContext)(g), l = i.setMarker, o = i.cardNames, j = i.setCardName, b = i.setSearchInput, u = i.searchTerm, h = i.setSearchTerm, m = i.predictions, O = i.setPredictions, p = i.displayAutcomplete, f = i.setDisplayAutocomplete; return Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("input", { id: c, type: "text", className: "search-catalog" === c ? "search-catalog-field" : "search-field", value: n ? u : "", onChange: function (e) { if (e.target.value.length >= 3) { l(-1); var t = null === o || void 0 === o ? void 0 : o.filter((function (t) { return t.toLowerCase().includes(e.target.value.toLowerCase()) })); !p && f(!0), O(t) } else f(!1), j(""); h(e.target.value) }, onFocus: function (e) { e.preventDefault(), b(e.target) }, onBlur: function (e) { e.preventDefault(), l(-1), h("") }, ref: r, placeholder: "search-catalog" === c ? "Search Magic Find" : "search-collection" === c ? "Search Your Collection" : "Search Skryfall API" }), n && u && Object(d.jsx)(w, { predictions: m, searchCard: s, inputRef: r })] }) })), C = function () { return window.navigator.userAgent }; function A(e, t) { e.classList.toggle(t) } var E = function (e) { var t = C(); document.querySelector(".mobile-nav-label").click(), document.querySelector("#search-catalog-container").style.width = 0, document.querySelector(".search-btn").style.setProperty("display", "block"), t.toLowerCase().includes("firefox") && A(document.querySelector(".main-header"), "checked") }, I = function () { return document.body.clientWidth }, q = function (e, t) { return e.toLowerCase().replaceAll(/["/,]/g, "").replace("  ", " ").split(" ").join(t) }, R = function () { var e = Object(a.useState)(!1), t = Object(o.a)(e, 2), c = t[0], n = t[1], s = Object(a.useRef)(null), r = Object(a.useContext)(g), i = r.searchInput, j = r.setLoading, b = r.setSearchInput, u = r.searchTerm, m = r.cardName, O = r.setCardName, f = r.setCardNames, x = r.predictions, v = Object(l.q)(), y = p().auth, N = I(); Object(a.useEffect)((function () { "search-catalog" === (null === i || void 0 === i ? void 0 : i.id) ? (!function () { var e = new Headers; e.append("Content-Type", "application/json"); var t = { method: "GET", headers: e }; fetch("".concat(h.serverURL, "/api/cards/catalog"), t).then((function (e) { return e.json() })).then((function (e) { f(e.cards) })).catch((function (e) { return console.log(e) })) }(), n(!0)) : n(!1) }), [i]); var S = function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0; if (null === t || void 0 === t || t.preventDefault(), !(u.length < 3)) { j(!0), null === (e = s.current) || void 0 === e || e.blur(); var a = new Headers; a.append("Content-Type", "application/json"), y && a.append("auth-token", y.token); var n, r = { method: "GET", headers: a }; c ? n = c : m ? n = m : 1 === x.length ? n = x[0] : u && (n = u); var l = y ? "".concat(h.serverURL, "/api/cards/catalog/").concat(encodeURIComponent(n), "/").concat(y.id) : "".concat(h.serverURL, "/api/cards/catalog/").concat(encodeURIComponent(n)); fetch(l, r).then((function (e) { return 200 === e.status ? e.json().then((function (e) { var t; j(!1); var c = { cards: e.cards, searchType: i.id }; O(""), b(null), localStorage.setItem("search-result", JSON.stringify(c)), v("/search-result/catalog/".concat(q(n.toLowerCase(), "-")), { state: c }), N <= 775 && (null === (t = document.querySelector("#mobile-nav")) || void 0 === t ? void 0 : t.checked) && E() })) : 400 === e.status ? e.json().then((function (e) { var t; console.log(e.message), j(!1), "not-found" === e.errorType && v("/search-result/not-found/".concat(n)), N <= 775 && (null === (t = document.querySelector("#mobile-nav")) || void 0 === t ? void 0 : t.checked) && E() })) : void 0 })) } }; return Object(d.jsx)("div", { id: "search-catalog-container", children: Object(d.jsx)("form", { id: "search-catalog-form", className: "search-form", onSubmit: S, children: Object(d.jsx)(k, { isActive: c, id: "search-catalog", searchCard: S, ref: s }) }) }) }, T = function (e) { var t = e.paths; return Object(d.jsx)("ul", { className: "menu", children: t.map((function (e, t) { return Object(d.jsx)("li", { children: Object(d.jsx)(i.b, { className: "nav-link", to: e.to, replace: !0, children: e.name }) }, t) })) }) }; var F, P, D, z, M, L, J, U, H = function (e) { var t = e.authPaths, c = p().logoutAction; return Object(d.jsxs)("ul", { className: "menu auth-menu", children: [t.map((function (e, t) { return Object(d.jsx)("li", { children: Object(d.jsx)(i.c, { className: "nav-link", to: e.to, children: e.name }) }, t) })), Object(d.jsx)("li", { children: Object(d.jsx)("div", { className: "nav-link logout", onClick: function () { return c() }, children: "Logout" }) })] }) }, B = c(7), G = c(14), Q = c(8), Z = Q.a.label(F || (F = Object(B.a)(["\n&:hover {\n    cursor: pointer;\n}\nsvg {\n    display: block;\n\n    @media (width >= 775px) {\n        display: none;\n    }\n}\n\n"]))), Y = function () { return Object(d.jsx)(Z, { htmlFor: "mobile-nav", className: "nav-btn search-btn search-nav-label", children: Object(d.jsx)(G.d, { className: "nav-icon", size: 28, title: "Search Catalog" }) }) }, X = Q.a.div(P || (P = Object(B.a)(["\n  position: relative;\n  display: flex;\n"]))), K = Object(Q.a)(i.b)(D || (D = Object(B.a)(["\n   color: var(--clr-grey);\n"]))), W = Q.a.div(z || (z = Object(B.a)(["\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: -10px;\n  left: 17px;\n  background-color: #28a745;\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  z-index: 10;\n"]))), V = Q.a.div(M || (M = Object(B.a)(["\n  text-align: center;\n  font-size: 0.8em;\n  font-weight: bold;\n  color: #fff;\n"]))), _ = function () { var e = p().unreadMail; return Object(d.jsx)(X, { className: "nav-btn", children: Object(d.jsxs)(K, { className: "mail-btn", to: "/mail/inbox", title: " To Inbox", children: [e > 0 && Object(d.jsx)(W, { children: Object(d.jsx)(V, { children: e }) }), Object(d.jsx)(G.c, { className: "nav-icon", size: 27 })] }) }) }, $ = function () { return Object(d.jsx)("div", { className: "hamburger  nav-btn", children: Object(d.jsx)("label", { htmlFor: "mobile-nav", className: "hamburger-btn mobile-nav-label", children: Object(d.jsx)("span", {}) }) }) }, ee = c(18), te = function () { return Object(d.jsx)("div", { className: "nav-btn signin-nav-btn", children: Object(d.jsx)(i.b, { className: "signin-btn", to: "/login", children: Object(d.jsx)(ee.c, { className: "nav-icon", size: 27, title: "Login" }) }) }) }, ce = function (e) { var t = e.auth; return t.avatar.src ? Object(d.jsx)("img", { src: t.avatar.src, alt: "Avatar" }) : t.avatar.letter }, ae = function (e) { var t = e.auth, c = e.panelRef; return Object(d.jsx)("button", { className: "nav-btn avatar-btn", style: { backgroundColor: "#".concat(t.avatar.color) }, onClick: function () { return c.current.classList.toggle("side-show") }, children: Object(d.jsx)(ce, { auth: t }) }) }, ne = Object(a.forwardRef)((function (e, t) { var c = e.children; return Object(d.jsx)("div", { className: "side-panel", onClick: function () { return null === t || void 0 === t ? void 0 : t.current.classList.toggle("side-show") }, ref: t, children: c }) })), se = Q.a.div(L || (L = Object(B.a)(["\n  position: relative;\n  display: flex;\n"]))), re = Q.a.div(J || (J = Object(B.a)(["\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: -10px;\n  left: 17px;\n  background: #dc3545;\n  width: 22px;\n  height: 22px;\n  border-radius: 50%;\n  z-index: 10;\n"]))), ie = Q.a.div(U || (U = Object(B.a)(["\n  text-align: center;\n  font-size: 0.8em;\n  font-weight: bold;\n  color: #fff;\n"]))), le = function () { var e = Object(a.useContext)(y).itemsCount; return Object(d.jsx)(se, { className: "nav-btn", children: Object(d.jsxs)(i.b, { to: "/shopping-cart", className: "cart-btn", children: [e > 0 && Object(d.jsx)(re, { children: Object(d.jsx)(ie, { children: e }) }), Object(d.jsx)(G.e, { className: "nav-icon", size: 27, title: "To Shopping Cart" })] }) }) }; var oe, de, je, be, ue, he, me, Oe, pe, fe, xe, ge, ve, ye, Ne, Se, we, ke, Ce, Ae, Ee, Ie, qe, Re, Te, Fe = function (e) { var t = e.auth, c = Object(a.useRef)(null), n = [{ name: "Dashboard", to: "../me/dashboard" }, { name: "Collection", to: "../me/collection" }, { name: "Store", to: "../me/store" }, { name: "Profile", to: "profile" }, { name: "Settings", to: "settings" }]; return Object(d.jsxs)("div", { className: "navbar", children: [Object(d.jsx)("input", { type: "checkbox", id: "mobile-nav", className: "mobile-nav" }), Object(d.jsxs)("nav", { children: [Object(d.jsxs)("section", { className: "nav-btns", children: [Object(d.jsx)(Y, {}), t ? Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)(_, {}), Object(d.jsx)(le, {}), Object(d.jsx)($, {}), Object(d.jsx)(ae, { auth: t, panelRef: c })] }) : Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)(le, {}), Object(d.jsx)(te, {}), Object(d.jsx)($, {})] })] }), Object(d.jsx)("section", { className: "nav-links", children: t ? Object(d.jsx)(H, { authPaths: n }) : Object(d.jsx)(T, { paths: [{ name: "Home", to: "/" }, { name: "About", to: "about" }, { name: "Contact", to: "contact" }, { name: "Sing in", to: "login" }, { name: "Crate Account", to: "signup" }] }) }), Object(d.jsx)(ne, { ref: c, children: Object(d.jsx)(H, { authPaths: n }) })] })] }) }, Pe = c(37), De = Q.a.div(oe || (oe = Object(B.a)(["\nheight: inherit;\ndisplay: flex;\nalign-items: center;\n\n&:hover {\n  cursor: pointer;\n}\n"]))), ze = Object(Q.a)(i.b)(de || (de = Object(B.a)(["\ndisplay: flex;\nalign-items: center;\n"]))), Me = Q.a.div(je || (je = Object(B.a)(["\ndisplay: inline-block;\nsvg {\n  font-size: 3.4rem;\n  display: block;\n}\n"]))), Le = Q.a.div(be || (be = Object(B.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    @media (width >= 725px) {\n      flex-direction: row;\n      align-items: center;\n    }\n"]))), Je = Q.a.div(ue || (ue = Object(B.a)(["\n  font-family: 'Young Serif', serif;\n  font-size: 1.8rem;\n  line-height: 1;\n  margin-inline-start: 5px;\n\n  @media (width >= 725px) {\n    font-size: 2.8rem;\n  }\n"]))), Ue = function () { var e = p().auth; return Object(d.jsx)(De, { children: Object(d.jsxs)(ze, { className: "logo-btn", to: e ? "me" : "/", title: "Magic Find logo", children: [Object(d.jsx)(Me, { children: Object(d.jsx)(Pe.a, {}) }), Object(d.jsxs)(Le, { children: [Object(d.jsx)(Je, { children: "Magic" }), Object(d.jsx)(Je, { children: "Find" })] })] }) }) }, He = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], c = C(), a = I(), n = e.target; n && (n.classList.contains("nav-link") && (document.querySelector("#mobile-nav").click(), document.querySelector(".menu").style.setProperty("left", "100%"), document.querySelector(".search-btn").style.setProperty("display", "block"), c.toLocaleLowerCase().includes.firefox && A(document.querySelector(".main-header"), "checked")), n.classList.contains("search-btn") && (document.querySelector("#search-catalog-container").style.setProperty("width", "calc(100% - 5rem)"), document.querySelector("#search-catalog").focus()), n.classList.contains("logo-btn") && document.querySelector("#mobile-nav").checked && (document.querySelector("#mobile-nav").click(), document.querySelector(".menu").style.setProperty("left", "100%"), a <= 775 && document.querySelector(".search-btn").style.setProperty("display", "block"), c.toLocaleLowerCase().includes.firefox && A(document.querySelector(".main-header"), "checked")), n.classList.contains("hamburger-btn") && (document.querySelector("#mobile-nav").checked ? (a <= 775 && "calc(100% - 5rem)" === document.querySelector("#search-catalog-container").style.width && (document.querySelector("#search-catalog-container").style.setProperty("width", "0"), document.querySelector(".search-btn").style.setProperty("display", "block"), document.querySelector("#search-catalog").blur(), document.querySelector("#search-catalog").value = ""), "100%" !== document.querySelector(".menu").style.left && (document.querySelector(".menu").style.setProperty("left", "100%"), document.querySelector(".search-btn").style.setProperty("display", "block"))) : document.querySelector(".menu").style.setProperty("left", "100%"), document.querySelector("#mobile-nav").checked || (a <= 775 && document.querySelector(".search-btn").style.setProperty("display", "none"), document.querySelector(".menu").style.setProperty("left", "0"))), t && (a <= 775 && (document.querySelector("#search-catalog-container").style.width = 0, document.querySelector(".search-btn").style.setProperty("display", "block")), n.click(), c.toLowerCase().includes("firefox") && A(document.querySelector(".main-header"), "checked"))) }, Be = function () { var e = p().auth; return Object(d.jsx)("header", { className: "main-header", onClick: function (e) { He(e) }, children: Object(d.jsxs)("div", { className: "top-header", children: [Object(d.jsx)(Ue, {}), Object(d.jsx)(R, {}), Object(d.jsx)(Fe, { auth: e })] }) }) }, Ge = function () { return Object(d.jsx)("footer", { className: "footer", children: Object(d.jsx)("p", { children: "Magic Find \u2022 Copyright \xa9 2022 \u2022 All Rights Reserved" }) }) }, Qe = c(38), Ze = function () { return Object(d.jsx)("div", { className: "loading-icon inherit-height flex align-center justify-center", children: Object(d.jsx)(Qe.a, {}) }) }, Ye = function () { var e = Object(l.o)(), t = Object(a.useContext)(g).loading; return Object(d.jsx)("div", { className: "wrapper", children: "/login" === e.pathname || "/signup" === e.pathname ? Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("div", { className: "container", children: Object(d.jsx)(l.b, {}) }), Object(d.jsx)(Ge, {})] }) : Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)(Be, {}), Object(d.jsx)("div", { className: "container", children: Object(d.jsx)("div", { className: "content", children: t ? Object(d.jsx)("div", { className: "loading-content", children: Object(d.jsx)(Ze, {}) }) : Object(d.jsx)(l.b, {}) }) }), Object(d.jsx)(Ge, {})] }) }) }, Xe = function () { var e = p().auth, t = Object(l.o)(); return e ? Object(d.jsx)(l.b, { auth: e }) : Object(d.jsx)(l.a, { to: "/login", state: { from: t }, replace: !0 }) }, Ke = function () { var e = p().auth, t = Object(l.o)(); return e ? Object(d.jsx)(l.a, { to: "/me", state: { from: t }, replace: !0 }) : Object(d.jsx)(l.b, {}) }, We = function () { return Object(d.jsx)("div", { className: "outer-content", children: Object(d.jsx)("div", { className: "inner-content", children: Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Store" }) }) }) }) }, Ve = function (e) { var t = e.views; return Object(d.jsx)("div", { className: "contextual-links", children: t.map((function (e, t) { return Object(d.jsx)(i.c, { id: e.id, to: e.path, className: function (e) { return e.isActive ? "active-link" : "inactive-link" }, children: Object(d.jsx)("span", { children: e.title }) }, t) })) }) }, _e = function () { return Object(d.jsx)("div", { className: "outer-content", children: Object(d.jsx)("div", { className: "inner-content", children: Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Home" }) }) }) }) }, $e = function (e) { e.path; var t, c = Object(a.useState)(!1), n = Object(o.a)(c, 2), s = n[0], r = n[1], j = Object(a.useState)(!1), b = Object(o.a)(j, 2), m = b[0], O = b[1], f = Object(a.useRef)(null), x = Object(a.useContext)(g), v = x.errorMessage, y = x.setErrorMessage, N = x.searchInput, S = x.setSearchInput, w = x.searchTerm, C = x.cardName, A = x.setCardName, R = x.setCardNames, T = x.predictions, F = x.setHasLoaded, P = (x.hasLoaded, Object(l.q)()), D = p().auth, z = I(), M = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; r(!0); var t = new Headers; t.append("Content-Type", "application/json"), t.append("auth-token", D.token); var c = { method: "GET", headers: t }; fetch("".concat(h.serverURL, "/api/cards/").concat(D.id, "/").concat(e), c).then((function (e) { return e.ok ? e.json().then((function (e) { var t, c = e.query, a = e.data; if ("card-names" === c) R(a), F(!0), v && y(null); else if ("cards" === c) { var n = { cards: a, searchType: N.id }; localStorage.setItem("search-result", JSON.stringify(n)), P("/search-result/collection/all-cards", { state: n }) } r(!1), null === (t = f.current) || void 0 === t || t.focus() })) : 400 === e.status ? e.json().then((function (e) { r(!1), y(Object(u.a)({}, e.message)) })) : void 0 })) }; Object(a.useEffect)((function () { var e; M("card-names"), z <= 775 && (null === (e = document.querySelector("#mobile-nav")) || void 0 === e ? void 0 : e.checked) && E() }), []), Object(a.useEffect)((function () { "search-collection" === (null === N || void 0 === N ? void 0 : N.id) ? O(!0) : O(!1) }), [N]); var L = function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0, c = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0; if (null === t || void 0 === t || t.preventDefault(), !(w.length < 3)) { r(!0), null === (e = f.current) || void 0 === e || e.blur(); var a = new Headers; a.append("Content-Type", "application/json"), a.append("auth-token", D.token); var n = { method: "GET", headers: a }, s = ""; c ? s = c : C ? s = C : 1 === T.length ? s = T[0] : w && (s = w), fetch("".concat(h.serverURL, "/api/cards/collection/").concat(D.id, "/").concat(encodeURIComponent(s)), n).then((function (e) { if (200 === e.status) return e.json().then((function (e) { r(!1); var t = { cards: e.cards, searchType: N.id }; A(""), S(null), localStorage.setItem("search-result", JSON.stringify(t)), P("/search-result/collection/".concat(q(s.toLowerCase(), "-")), { state: t }) })); 400 === e.status && (r(!1), P("/search-result/not-found/".concat(s))) })) } }; return Object(d.jsx)("div", { className: "outer-content", children: "no_cards" === (null === v || void 0 === v ? void 0 : v.title) ? Object(d.jsxs)("div", { className: "message", children: [Object(d.jsx)("section", { className: "message-section", children: Object(d.jsx)("div", { className: "message-body", children: null === (t = v.body) || void 0 === t ? void 0 : t.map((function (e, t) { return Object(d.jsx)("p", { children: e }, t) })) }) }), Object(d.jsx)("section", { className: "message-section", children: Object(d.jsxs)(i.b, { className: "message-link", to: "../me/add-card", children: [" To Add Card Page ", Object(d.jsx)(G.b, {})] }) })] }) : s ? Object(d.jsx)(Ze, {}) : Object(d.jsxs)("div", { className: "inner-content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Browse Collection" }) }), Object(d.jsxs)("main", { className: "flex flex-column", children: [Object(d.jsx)("form", { id: "search-collection-form", className: "search-form", onSubmit: L, children: Object(d.jsx)(k, { isActive: m, id: "search-collection", searchCard: L, ref: f }) }), Object(d.jsx)("button", { className: "bg-green", type: "button", onClick: function () { return M("cards") }, children: "All Cards" })] })] }) }) }, et = function (e) { var t = e.path, c = Object(a.useState)(!1), n = Object(o.a)(c, 2), s = n[0], r = n[1], i = Object(a.useState)(!1), j = Object(o.a)(i, 2), b = j[0], m = j[1], O = Object(a.useState)(""), p = Object(o.a)(O, 2), f = p[0], x = p[1], v = Object(a.useState)(null), y = Object(o.a)(v, 2), N = y[0], S = y[1], w = Object(a.useRef)(null), C = Object(a.useContext)(g), A = C.searchInput, R = C.setSearchInput, T = C.searchTerm, F = C.predictions, P = C.cardName, D = C.setCardName, z = C.setCardNames, M = C.apiCards, L = C.setApiCards, J = Object(l.q)(), U = I(); Object(a.useEffect)((function () { var e; "add-card" === t && w.current.focus(), U <= 775 && (null === (e = document.querySelector("#mobile-nav")) || void 0 === e ? void 0 : e.checked) && E() }), []), Object(a.useEffect)((function () { "search-api" === (null === A || void 0 === A ? void 0 : A.id) ? (M ? z(M) : function () { r(!0); var e = new Headers; e.append("Content-Type", "application/json"); var t = { method: "GET", headers: e }; fetch("".concat(h.serverURL, "/api/cards/api-cardnames"), t).then((function (e) { return e.json() })).then((function (e) { L(e), z(e), r(!1), w.current.focus() })).catch((function (e) { r(!1), console.log(e) })) }(), m(!0)) : m(!1) }), [A]); var H = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0; if (null === e || void 0 === e || e.preventDefault(), !(T.length < 3)) { r(!0); var c = { method: "GET" }, a = ""; t ? a = "cards/named?exact=".concat(t) : P ? a = "cards/named?exact=".concat(P) : 1 === F ? a = "cards/named?exact=".concat(F[0]) : T && (a = "cards/named?fuzzy=".concat(T)), w.current.blur(), fetch("".concat(h.skryfallURL, "/").concat(a), c).then((function (e) { if (e.ok) return e.json().then((function (e) { var t = e.name, c = e.oracle_id; localStorage.setItem("oracle", c), x(c), D(t) })); 404 === e.status && (r(!1), J("/search-result/not-found/".concat(T))) })) } }; return Object(a.useEffect)((function () { if (f) { fetch("".concat(h.skryfallURL, "/cards/search?order=released&q=oracleid%3A").concat(f, "&unique=prints"), { method: "GET" }).then((function (e) { return e.json() })).then((function (e) { S(e.data) })).catch((function (e) { return console.log(e) })) } }), [f]), Object(a.useEffect)((function () { if (N) { var e = [], t = N.filter((function (e) { return !e.digital })); t.forEach((function (c, a) { 1 === c.finishes.length && e.push(t.splice(a, 1).pop()) })), t.forEach((function (t) { t.finishes.forEach((function (c) { e.push(Object(u.a)(Object(u.a)({}, t), {}, { finishes: [c], id: "".concat(t.id, "_").concat(c) })) })) })), r(!1), D(""), R(null); var c = { cards: e, searchType: A.id }; localStorage.setItem("search-result", JSON.stringify(c)), J("/search-result/api/".concat(q(P, "-")), { state: c }) } }), [N]), Object(d.jsx)("div", { className: "outer-content", children: s ? Object(d.jsx)(Ze, {}) : Object(d.jsxs)("div", { className: "inner-content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Add a card" }) }), Object(d.jsx)("main", { className: "main", children: Object(d.jsx)("form", { id: "search-api-form", className: "search-form", onSubmit: H, children: Object(d.jsx)(k, { isActive: b, id: "search-api", searchCard: H, ref: w }) }) })] }) }) }, tt = function () { var e = Object(l.s)().path; return Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("section", { className: "contextual-nav", children: Object(d.jsx)(Ve, { views: [{ title: "Home", id: "home", path: "../me/home" }, { title: "Collection", id: "collection", path: "../me/collection" }, { title: "Store", id: "store", path: "../me/store" }, { title: "Add Card", id: "add-card", path: "../me/add-card" }] }) }), "collection" === e ? Object(d.jsx)($e, { path: e }) : "store" === e ? Object(d.jsx)(We, { path: e }) : "add-card" === e ? Object(d.jsx)(et, { path: e }) : Object(d.jsx)(_e, {})] }) }, ct = c(11), at = function (e) { return "".concat(e.charAt(0).toUpperCase()).concat(e.substring(1)) }, nt = function (e, t) { var c = Object.keys(e), a = {}; return c.forEach((function (c) { e[c] ? t[c].validity.patternMismatch ? (a = Object(u.a)(Object(u.a)({}, a), {}, Object(ct.a)({}, c, "confirmPassword" === c ? "Password doesn't match" : "Invalid ".concat(at(c)))), t[c].blur()) : t[c].checkValidity() || (a = Object(u.a)(Object(u.a)({}, a), {}, Object(ct.a)({}, c, "Invalid ".concat(at(c))))) : (a = Object(u.a)(Object(u.a)({}, a), {}, Object(ct.a)({}, c, "".concat(at("confirmPassword" === c ? "password" : c), " is required"))), t[c].blur()) })), a }, st = { email: "", password: "" }, rt = function () { var e = Object(a.useState)(st), t = Object(o.a)(e, 2), c = t[0], n = t[1], s = Object(a.useState)(st), r = Object(o.a)(s, 2), j = r[0], b = r[1], m = Object(a.useState)(!1), O = Object(o.a)(m, 2), f = O[0], x = O[1], g = Object(a.useState)(!1), v = Object(o.a)(g, 2), y = v[0], N = v[1], S = Object(a.useState)(!1), w = Object(o.a)(S, 2), k = w[0], C = w[1], A = Object(a.useState)(null), E = Object(o.a)(A, 2), I = E[0], q = E[1], R = Object(a.useState)(!1), T = Object(o.a)(R, 2), F = T[0], P = T[1], D = Object(l.o)(), z = Object(l.q)(), M = Object(a.useRef)(null), L = Object(a.useRef)(null), J = p().setAuth, U = { email: M.current, password: L.current }; Object(a.useEffect)((function () { D.state && D.state.message && q(Object(u.a)({}, D.state.message)), null === M || void 0 === M || M.current.focus() }), []), Object(a.useEffect)((function () { 0 === Object.keys(j).length && k ? N(!0) : C(!1) }), [j]), Object(a.useEffect)((function () { document.querySelector("#password").type = F ? "text" : "password" }), [F]), Object(a.useEffect)((function () { if (y) { x(!0); var e = { email: c.email.toLowerCase().trim(), password: c.password }, t = { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(e) }; try { fetch("".concat(h.serverURL, "/api/users/login"), t).then((function (e) { return e.ok ? e.json() : e.json().then((function (e) { throw new Error(JSON.stringify(e)) })) })).then((function (e) { var t; localStorage.setItem("token", JSON.stringify(e.token)), localStorage.setItem("user", JSON.stringify(e.payload.user)), J(Object(u.a)(Object(u.a)({}, e.payload.user), {}, { token: e.token })), x(!1); var c = (null === (t = D.state) || void 0 === t ? void 0 : t.from) ? D.state.from.pathname : "me/pathname"; z(c, { replace: !0 }) })).catch((function (e) { console.log(e); var t = e && JSON.parse(e.message); q(Object(u.a)({}, t)), U.email.setCustomValidity("invalid"), U.password.setCustomValidity("invalid"), b(nt(c, U)), n(Object(u.a)(Object(u.a)({}, c), {}, { email: "", password: "" })), N(!1) })) } catch (s) { var a = JSON.parse(s.message); q(Object(u.a)({}, a)), x(!1), N(!1) } } }), [y]); var H = function (e) { n(Object(u.a)(Object(u.a)({}, c), {}, Object(ct.a)({}, e.target.name, e.target.value))) }, B = function (e) { if (j[e.target.name]) { var t = Object(u.a)({}, j); delete t[e.target.name], b(t) } }, G = function (e) { }; return Object(d.jsx)(d.Fragment, { children: f ? Object(d.jsx)(Ze, {}) : Object(d.jsxs)("div", { className: "form-content", children: [Object(d.jsx)("div", { className: "form-logo", children: Object(d.jsx)(i.b, { to: "/", children: Object(d.jsx)("h1", { children: "Magic Find" }) }) }), I ? Object(d.jsxs)("div", { className: "error" === I.type ? "show-error-message" : "success" === I.type ? "show-success-message" : "hide", children: [Object(d.jsx)("h4", { className: "auth-message-title", children: I.name ? Object(d.jsxs)(d.Fragment, { children: [I.title, " ", Object(d.jsx)("strong", { children: I.name }), "!"] }) : I.title }), Object(d.jsx)("p", { className: "auth-message-body", children: I.body })] }) : Object(d.jsx)("div", { className: "form-title", children: Object(d.jsx)("h2", { children: "Log in to your account" }) }), Object(d.jsxs)("form", { className: "auth-form", id: "signin-form", name: "signin-form", onSubmit: function (e) { e.preventDefault(); var t = nt(c, U); C(!0), b(t) }, noValidate: !0, children: [Object(d.jsxs)("div", { className: "form-element", children: [Object(d.jsx)("label", { htmlFor: "email", className: j.email && "color-danger", children: j.email ? j.email : "Email" }), Object(d.jsx)("input", { className: j.email && "border-danger danger-padding", id: "email", type: "email", name: "email", value: c.email, onChange: H, onFocus: B, onBlur: G, pattern: "[a-zA-Z0-9._%+\\-]{3,}@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}", placeholder: "Email", ref: M })] }), Object(d.jsxs)("div", { className: "form-element", children: [Object(d.jsx)("label", { htmlFor: "password", className: j.password && "color-danger", children: j.password ? j.password : "Password" }), Object(d.jsxs)("div", { className: "login-password-wrapper center content-height flex ".concat(j.password && "border-danger"), children: [Object(d.jsx)("input", { id: "password", type: "password", name: "password", value: c.password, onChange: H, onFocus: B, onBlur: G, pattern: "^(?!Enter Code$).*", placeholder: "Password", ref: L }), Object(d.jsx)("button", { className: "password-btn flex align-center justify-center", type: "button", onMouseDown: function (e) { e.preventDefault(), P(!F) }, children: Object(d.jsx)("i", { className: F ? "fa-solid fa-eye-slash" : "fa-solid fa-eye" }) })] })] }), Object(d.jsx)("div", { className: "form-element flex margin-block-start-2", children: Object(d.jsx)(i.b, { className: "link", to: "/reset-password", children: "Forgot password?" }) }), Object(d.jsxs)("div", { className: "form-element form-submit", children: [Object(d.jsx)(i.b, { className: "link", to: "/signup", children: "Create account" }), Object(d.jsx)("button", { className: "login-btn form-btn", type: "submit", children: "Login" })] })] })] }) }) }, it = c(19), lt = function (e) { var t = e.requirement; return Object(d.jsxs)("p", { children: [Object(d.jsx)("i", { className: "".concat(t.fullfiled ? "fa-solid fa-check color-success" : "fa-regular fa-circle-xmark color-danger", " margin-inline-end-1") }), t.text] }) }, ot = function (e) { var t = e.inputState; return Object(d.jsx)("div", { className: "requirements-container", children: Object(d.jsx)("div", { className: "requirements-wrapper", children: Object(d.jsx)("div", { className: "requirements-message", children: t && t.map((function (e, t) { return Object(d.jsx)(lt, { requirement: e }, t) })) }) }) }) }, dt = Object(a.forwardRef)((function (e, t) { var c = e.id, a = e.name, n = e.inputState, s = e.onChange, r = e.onFocus, i = e.errors, l = e.onBlur, o = e.label, j = Object(it.a)(e, ["id", "name", "inputState", "onChange", "onFocus", "errors", "onBlur", "label"]), b = t; return Object(d.jsxs)("div", { className: "form-element", children: [i[a] ? Object(d.jsx)("label", { className: "color-danger", htmlFor: c, children: i[a] }) : Object(d.jsx)("label", { htmlFor: c, children: o }), Object(d.jsx)("input", Object(u.a)(Object(u.a)({ className: i[a] && "border-danger danger-padding", id: c, name: a }, j), {}, { onChange: s, onFocus: r, onBlur: l, ref: b })), Object(d.jsx)(ot, { inputState: n })] }) })), jt = { INPUT_CHANGE: "change", INPUT_FOCUS: "focus", INPUT_BLUR: "blur", INPUT_SUBMIT: "submit" }, bt = function (e, t) { switch (t.type) { case jt.INPUT_CHANGE: !function (t) { var a = t.values, n = t.requirements, s = t.name, r = []; "password" === s ? (a.confirmPassword && (r = c(n.confirmPassword, a.password, !0), e = Object(u.a)(Object(u.a)({}, e), {}, { confirmPassword: r })), r = c(n.password, a.password), e = Object(u.a)(Object(u.a)({}, e), {}, Object(ct.a)({}, s, r))) : "confirmPassword" === s ? (r = c(n.input, a.input, !0), e = Object(u.a)(Object(u.a)({}, e), {}, { confirmPassword: r })) : (r = c(n.input, a.input), e = Object(u.a)(Object(u.a)({}, e), {}, Object(ct.a)({}, s, r))) }(t.payload); break; case jt.INPUT_FOCUS: !function (t) { var a = "confirmPassword" === t.name, n = c(t.requirements, t.value, a); e = Object(u.a)(Object(u.a)({}, e), {}, Object(ct.a)({}, t.name, n)) }(t.payload); break; case jt.INPUT_BLUR: t.payload; break; default: throw new Error("Unknown action type: ".concat(t.type)) }return e; function c(e, t) { var c = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; return e.map((function (e) { var a = c ? new RegExp(e.pattern) : e.pattern; return e = Object(u.a)(Object(u.a)({}, e), {}, { fullfiled: !!a.test(t) }) })) } }, ut = { username: "", email: "", country: "", password: "", confirmPassword: "" }, ht = function () { var e = Object(a.useState)(ut), t = Object(o.a)(e, 2), c = t[0], n = t[1], s = Object(a.useState)(ut), r = Object(o.a)(s, 2), j = r[0], b = r[1], m = Object(a.useState)(!1), O = Object(o.a)(m, 2), p = O[0], f = O[1], x = Object(a.useState)(!1), g = Object(o.a)(x, 2), v = g[0], y = g[1], N = Object(a.useState)(!1), S = Object(o.a)(N, 2), w = S[0], k = S[1], C = Object(a.useState)(""), A = Object(o.a)(C, 2), E = A[0], I = A[1], q = Object(a.useRef)(null), R = Object(a.useRef)(null), T = Object(a.useRef)(null), F = Object(a.useRef)(null), P = Object(a.useRef)(null), D = { username: q.current, email: R.current, country: T.current, password: F.current, confirmPassword: P.current }, z = [{ name: "username", type: "text", value: c.username, placeholder: "Username", label: "Username", ref: q, pattern: "(?=.*[a-z])[a-z0-9]{3,12}", requirements: [{ text: "Must begin with a letter", pattern: /^[a-z]+.*$/, fullfiled: !1 }, { text: "Lowercase letters & numbers", pattern: /^(?=.*[a-z])[a-z0-9]{2,}$/, fullfiled: !1 }, { text: "3 to 12 characters", pattern: /^.{3,12}$/, fullfiled: !1 }] }, { name: "email", type: "email", value: c.email, placeholder: "Email", label: "Email", ref: R, pattern: "[a-zA-Z0-9._%+\\-]{3,}@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}", requirements: [{ text: "Enter a valid email address", pattern: /^[a-zA-Z0-9._%+\-]{3,}@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$/, fullfiled: !1 }] }, { name: "country", type: "text", value: c.country, placeholder: "Country", label: "Country", ref: T, pattern: "[a-zA-Z]{3,}", requirements: [{ text: "The country you currently live in", pattern: /^[a-zA-Z]{3,40}$/, fullfiled: !1 }] }, { name: "password", type: "password", value: c.password, placeholder: "Password", label: "Password", ref: F, pattern: "^(?=[a-zA-Z])(?=.*\\d)(?=.*[!@#$%^&*])(?=.*[A-Z])(?=.*[a-z])[a-zA-Z0-9!@#$%^&*]{8,16}$", requirements: [{ text: "Must begin with a letter", pattern: /^[a-zA-Z]+/, fullfiled: !1 }, { text: "One lowercase letter", pattern: /^(?=.*[a-zA-Z]).*[a-z].*$/, fullfiled: !1 }, { text: "One uppercase letter", pattern: /^(?=.*[a-zA-Z]).*[A-Z].*$/, fullfiled: !1 }, { text: "One number", pattern: /^.+(?=.*[0-9]).*$/, fullfiled: !1 }, { text: "One special character: !@#$%^&*", pattern: /^.+(?=.*[!@#$%^&*]).*$/, fullfiled: !1 }, { text: "8 to 16 characters long", pattern: /^.{8,16}$/, fullfiled: !1 }, { text: "Valid character", pattern: /^[a-zA-Z]+[a-zA-Z0-9!@#$%^&*]*$/, fullfiled: !1 }] }, { name: "confirmPassword", type: "password", value: c.confirmPassword, placeholder: "Confirm Password", label: "Confirm Password", ref: P, pattern: c.password, requirements: [{ text: "Passwords must match", pattern: "^".concat(c.password, "$"), fullfiled: !1 }] }], M = Object(a.useReducer)(bt, function () { var e = {}; for (var t in ut) e = Object(u.a)(Object(u.a)({}, e), {}, Object(ct.a)({}, t, [])); return e }()), L = Object(o.a)(M, 2), J = L[0], U = L[1], H = Object(l.q)(); Object(a.useEffect)((function () { 0 === Object.keys(j).length && w ? y(!0) : k(!1) }), [j]), Object(a.useEffect)((function () { if (v) { f(!0); var e = { name: c.username.trim(), email: c.email.trim(), country: c.country.trim(), password: c.password, confirmPassword: c.confirmPassword }, t = { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(e) }; try { fetch("".concat(h.serverURL, "/api/users/signup"), t).then((function (e) { return e.ok ? e.json() : e.json().then((function (e) { throw f(!1), new Error(JSON.stringify(e)) })) })).then((function (e) { H("/login", { state: { message: e.message } }, { replace: !0 }) })).catch((function (e) { I(e.message), y(!1), f(!1) })) } catch (a) { f(!1), I(a.message), y(!1) } } }), [v]); var B = function (e) { n(Object(u.a)(Object(u.a)({}, c), {}, Object(ct.a)({}, e.target.name, e.target.value))), e.target.checkValidity() || e.target.setCustomValidity(""), e.target.checkValidity() && !e.target.value && e.target.setCustomValidity("invalid"), e.target.value || e.target.setCustomValidity(""); var t = "password" !== e.target.name ? { name: e.target.name, values: { input: e.target.value }, requirements: { input: z[e.target.id].requirements } } : { name: e.target.name, values: { password: e.target.value, confirmPassword: D.confirmPassword.value }, requirements: { password: z[e.target.id].requirements, confirmPassword: z[z.length - 1].requirements } }; U({ type: e.type, payload: Object(u.a)({}, t) }) }, G = function (e) { if (j[e.target.name]) { var t = Object(u.a)({}, j); delete t[e.target.name], b(t) } e.target.value || e.target.setCustomValidity("invalid"), U({ type: e.type, payload: { name: e.target.name, value: e.target.value, requirements: z[e.target.id].requirements } }) }, Q = function (e) { !e.target.value && e.target.setCustomValidity("") }; return Object(d.jsx)(d.Fragment, { children: p ? Object(d.jsx)(Ze, {}) : Object(d.jsxs)("div", { className: "form-content", children: [Object(d.jsx)("div", { className: "form-logo", children: Object(d.jsx)(i.b, { to: "/", children: Object(d.jsx)("h1", { children: "Magic Find" }) }) }), Object(d.jsx)("div", { className: "form-title", children: Object(d.jsx)("h2", { children: "Create your account" }) }), Object(d.jsx)("div", { className: E ? "show-error-message" : "hide", children: Object(d.jsx)("p", { children: E.replace(/['"]+/g, "") }) }), Object(d.jsxs)("form", { className: "auth-form", id: "singup-form", name: "singup-form", onSubmit: function (e) { e.preventDefault(); var t = nt(c, D); k(!0), b(t) }, noValidate: !0, children: [z.map((function (e, t) { return Object(d.jsx)(dt, Object(u.a)(Object(u.a)({ id: t }, e), {}, { inputState: J[e.name], onChange: B, onFocus: G, onBlur: Q, errors: j, ref: e.ref }), t) })), Object(d.jsxs)("div", { className: "form-element form-submit", children: [Object(d.jsx)(i.b, { className: "link", to: "/login", children: "Already a member?" }), Object(d.jsx)("button", { className: "form-btn", type: "submit", children: "Submit" })] })] })] }) }) }, mt = function () { return Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Settings" }) }), Object(d.jsx)("main", { className: "main" })] }) }, Ot = function () { return Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Reset Password" }) }), Object(d.jsx)("main", { className: "main" })] }) }, pt = function () { return Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("section", { className: "banner home-page-banner" }), Object(d.jsxs)("div", { className: "content home-page", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Welcome to Magic Find" }) }), Object(d.jsxs)("main", { className: "main", children: [Object(d.jsxs)("div", { className: "article", children: [Object(d.jsx)("h2", { className: "article-title", children: "What it is" }), Object(d.jsxs)("div", { className: "article-body", children: [Object(d.jsx)("p", { children: "Magic Find is an interactive environment where you can buy and sell Magic the Gathering cards directly from and to other members of the Magic Find community from around the world." }), Object(d.jsx)("br", {}), Object(d.jsx)("p", { children: "The goal of Magic Find is to give you the opportunity to sell your cards without having to settle for a third party purchase price list. In other words, you get to fix the price for the cards you sell. The same is true for the cards you buy." }), Object(d.jsx)("br", {}), Object(d.jsx)("p", { children: "Magic Find's philosophy revolves around the belief that by cutting through intermediaries, you get to pay less for the cards you buy, and you get more dollars for the ones you sell." })] })] }), Object(d.jsxs)("div", { className: "article", children: [Object(d.jsx)("h2", { className: "article-title center", children: "How it works" }), Object(d.jsxs)("div", { className: "article-body", children: [Object(d.jsxs)("p", { children: ["First of all, you need to ", Object(d.jsx)(i.b, { to: "/register", children: "create your account" }), " and sign into it. At that point, you will be redirected to your own personnal virtual store."] }), Object(d.jsx)("br", {}), Object(d.jsx)("p", { children: "This is where you can add the cards you wish to sell, any card from the 10 000 + Magic the Gathering catalog. All you have to do is enter the name of the card in the search field and Magic Find will retrieve all the existing versions of that card. The search field has an auto complete feature. If you only remember part of a name's card, Magic Find will suggest possible results that you can choose from. You can also update the information in your store." }), Object(d.jsx)("br", {}), Object(d.jsx)("p", { children: "As a member, you get the possibility to buy cards from other members of the community. Your Magic Find account also gives you access to an internal mail service with your own personal inbox. The Magic Find catalog is accessible anytime to anyone. But only members can buy, sell and communicate with other members." })] })] }), Object(d.jsxs)("div", { className: "article", children: [Object(d.jsx)("h2", { className: "article-title center", children: "Parts & Labour" }), Object(d.jsxs)("div", { className: "article-body", children: [Object(d.jsxs)("p", { children: ["Magic Find is a ", Object(d.jsx)("strong", { children: "REST api" }), " with complete ", Object(d.jsx)("strong", { children: "CRUD" }), " operations. This gives members the power to add, update or delete the content of their virtual store. The same is true for their mailbox."] }), Object(d.jsx)("br", {}), Object(d.jsxs)("p", { children: ["The Front End is built with ", Object(d.jsx)("strong", { children: "React" }), ". It uses hooks and contexts to maintain and manage components state. All features are fully ", Object(d.jsx)("strong", { children: "responsive" }), "."] }), Object(d.jsx)("br", {}), Object(d.jsxs)("p", { children: ["The Back End is built with ", Object(d.jsx)("strong", { children: Object(d.jsx)("a", { href: "https://expressjs.com/", target: "_blank", title: "Express website", children: "Express" }) }), ". Requests are made to a no SQL ", Object(d.jsx)("strong", { children: "mongoDB Atlas" }), " data base. Populating a store is made through a series of requests to the ", Object(d.jsx)("a", { href: "https://scryfall.com/docs/api", target: "_blank", title: "scryfall api docs", children: Object(d.jsx)("strong", { children: "scryfall api" }) }), "."] })] })] })] })] })] }) }, ft = function () { return Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Contact" }) }), Object(d.jsx)("main", { className: "main" })] }) }, xt = function () { return Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "About" }) }), Object(d.jsx)("main", { className: "main" })] }) }, gt = function () { var e = p().auth; return Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Profile" }) }), Object(d.jsxs)("main", { className: "main", children: [Object(d.jsxs)("p", { children: ["Name: ", e.name] }), Object(d.jsxs)("p", { children: ["Country: ", e.country] })] })] }) }, vt = function (e) { var t = e.attributes, c = t.id, n = t.style, s = t.src, r = t.alt, i = t.placeholder, l = Object(a.useState)(!1), j = Object(o.a)(l, 2), b = j[0], u = j[1]; return Object(a.useEffect)((function () { var e = new Image; e.src = s, e.onload = function () { u(!0) } }), [s]), Object(d.jsx)("div", { className: "blur-load", children: b ? Object(d.jsx)("img", { id: c, className: n, src: s, alt: r, loading: "lazy" }) : Object(d.jsx)("img", { id: c, className: n, src: i, alt: r }) }) }, yt = function () { return Object(d.jsx)("button", { className: "card-icon-container expand-icon-btn", type: "button", children: Object(d.jsx)(ee.a, {}) }) }, Nt = function (e) { return Object(d.jsxs)("section", { className: "card-section", children: [Object(d.jsx)(vt, Object(u.a)({}, e)), Object(d.jsx)(yt, {})] }) }, St = function (e) { var t = e.card, c = e.loading; return Object(d.jsx)(d.Fragment, { children: c ? Object(d.jsx)(Ze, {}) : Object(d.jsx)(d.Fragment, { children: Object(d.jsxs)("div", { className: "card-info", children: [Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Set:" }), " ", Object(d.jsx)("span", { className: "card-spec-value", children: t.set_name })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Year:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.released_at.split("-")[0] })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Rarity:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: at(t.rarity) })] }) }), "nonfoil" !== t.finishes[0] && Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Finish:" }), "  ", Object(d.jsx)("span", { className: "".concat("foil" === t.finishes[0].toLowerCase() ? "foil-finish" : "", " card-spec-value"), children: at(t.finishes[0]) })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Frame:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.frame })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Collector #:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.collector_number })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Artist:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.artist.split(",")[0] })] }) })] }) }) }) }, wt = Object(Q.a)(i.b)(he || (he = Object(B.a)(["\n    display: block;\n    text-align: center;\n    margin-inline-end: 1rem;\n    padding-block: 0.5em;\n    margin-top: 0.5em;\n    font-size: var(--fs-125);\n    color: var(--clr-primary);\n    border: 1px solid #e4e4e4;\n    border-radius: 5px;\n  "]))), kt = function (e) { var t = e.card, c = e.loading, a = p().auth; return Object(d.jsx)(d.Fragment, { children: c ? Object(d.jsx)(Ze, {}) : Object(d.jsx)(d.Fragment, { children: Object(d.jsxs)("div", { className: "card-info", children: [Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Seller:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.userName })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Condition:" }), " ", Object(d.jsx)("span", { className: "card-spec-value", children: t.condition.toUpperCase() })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Ships From:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.userCountry })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Price:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.price })] }) }), t.quantity > 0 && Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Quantity:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: t.quantity })] }) }), a && Object(d.jsx)("div", { className: "contact-user", children: Object(d.jsx)(wt, { to: { pathname: "/mail/message", state: { sender: t.userName, subject: t.name } }, children: "Contact Seller" }) })] }) }) }) }, Ct = function (e) { var t, c = e.card; return Object(d.jsx)(d.Fragment, { children: Object(d.jsxs)("div", { className: "card-info", children: [Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Set:" }), " ", Object(d.jsx)("span", { className: "card-spec-value", children: c.set_name })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Year: " }), " ", Object(d.jsx)("span", { className: "card-spec-value", children: null === (t = c.released_at) || void 0 === t ? void 0 : t.split("-")[0] })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Rarity:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: at(c.rarity) })] }) }), "nonfoil" !== c.finishes[0] && Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Finish:" }), "  ", Object(d.jsx)("span", { className: "".concat("foil" === c.finishes[0].toLowerCase() ? "foil-finish" : "", " card-spec-value"), children: at(c.finishes[0]) })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Frame:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: c.frame })] }) }), Object(d.jsx)("div", { className: "card-collspecector", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Collector #:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: c.collector_number })] }) }), Object(d.jsx)("div", { className: "card-spec", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Artist:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: c.artist.split(",")[0] })] }) }), Object(d.jsx)("div", { className: "card-status", children: Object(d.jsxs)("p", { children: [Object(d.jsx)("span", { className: "card-spec-title", children: "Status:" }), "  ", Object(d.jsx)("span", { className: "card-spec-value", children: c._is_published ? "Published" : "Unpublished" })] }) })] }) }) }, At = function (e) { var t = e.searchType, c = Object(it.a)(e, ["searchType"]); return Object(d.jsx)("section", { className: "card-section", children: "search-catalog" === t ? Object(d.jsx)(kt, Object(u.a)({}, c)) : "search-collection" === t ? Object(d.jsx)(Ct, Object(u.a)({}, c)) : Object(d.jsx)(St, Object(u.a)({}, c)) }) }, Et = function () { return Object(d.jsxs)("div", { className: "card-btns-wrapper", children: [Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "add-to-wishlist", className: "btn bg-green color-light", type: "button", children: "Add to Wishlist" }) }), Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "add-to-cart", className: "btn bg-yellow color-light", type: "button", children: "Add to Cart" }) })] }) }, It = function (e) { e.card, e.handleClick; return Object(d.jsxs)("div", { className: "card-btns-wrapper", children: [Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "delete-card", className: "btn bg-red color-light", type: "button", children: "Delete" }) }), Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "edit-card", className: "btn bg-blue color-light", type: "button", children: "Edit" }) })] }) }, qt = function (e) { var t = e.attributes, c = e.handleClick, a = t.id, n = t.style, s = t.type, r = t.value, i = t.status; return Object(d.jsx)("button", { id: a, className: n, type: s, onClick: c, disabled: i, children: r }) }, Rt = { style: "btn bg-blue color-light border-blue", type: "button", value: "Add To Collection", statue: !1 }, Tt = function (e) { var t = e.card, c = e.setLoading, n = Object(a.useState)(Rt), s = Object(o.a)(n, 2), r = s[0], i = s[1], l = Object(a.useState)(null), j = Object(o.a)(l, 2), b = j[0], m = j[1], O = p().auth, f = function (e) { var t = { type: "button", value: e.body, style: "" }; switch (e.title) { case "card_added": t = Object(u.a)(Object(u.a)({}, t), {}, { style: "btn bg-light color-success border-success disabled" }); break; case "card_exist": t = Object(u.a)(Object(u.a)({}, t), {}, { style: "btn bg-light color-primary border-primary disabled" }); break; case "not_found": t = Object(u.a)(Object(u.a)({}, t), {}, { style: "btn bg-light color-danger border-danger disabled" }); break; default: t = Object(u.a)(Object(u.a)({}, t), {}, { style: "btn bg-blue color-light border-blue", value: "Add To Collection", status: !0 }) }return t }; Object(a.useEffect)((function () { if (b) { c(!0); var e = new Headers; e.append("Content-Type", "application/json"), e.append("auth-token", O.token); var t = { method: "POST", headers: e, body: JSON.stringify(b) }; fetch("".concat(h.serverURL, "/api/cards/add/").concat(O.id, "/").concat(b.id), t).then((function (e) { return e.ok ? e.json() : e.json().then((function (e) { throw c(!1), new Error(JSON.stringify(e)) })) })).then((function (e) { i(f(e.message)), c(!1) })).catch((function (e) { var t = JSON.parse(e.message); i(f(t)), c(!1) })) } }), [b]); return Object(d.jsx)("div", { className: "card-btns-wrapper", children: Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "add-to-collection", className: r.style, type: r.type, onClick: function () { m(t) }, children: r.value }) }) }) }, Ft = Object(a.forwardRef)((function (e, t) { var c = e.card, n = e.searchType, s = e.handleClick, r = Object(a.useState)(!1), i = Object(o.a)(r, 2), l = i[0], j = i[1], b = Object(a.useState)(null), u = Object(o.a)(b, 2), h = u[0], m = u[1], O = (null === c || void 0 === c ? void 0 : c.image_uris) || (null === c || void 0 === c ? void 0 : c.card_faces[0].image_uris), p = { id: "expand-card", style: "card-image b-radius-10", src: O.small, alt: "".concat(c.name, " image"), placeholder: "data:image/jpeg;base64,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" }; return Object(a.useEffect)((function () { var e; (null === (e = c.card_faces) || void 0 === e ? void 0 : e.length) ? m(c.card_faces.map((function (e) { return Object(a.createElement)("img", { id: "reduce-card", className: "card-image b-radius-20", src: e.image_uris.normal, alt: "".concat(c.name, " image") }) }))) : m(Object(a.createElement)("img", { id: "reduce-card", className: "card-image b-radius-20", src: O.normal, alt: "".concat(c.name, " image") })) }), [c]), Object(d.jsx)(d.Fragment, { children: Object(d.jsxs)("div", { className: "card-content", onClick: function (e) { return s(e, c, p, h) }, ref: t, children: [Object(d.jsx)("header", { className: "card-header", children: Object(d.jsx)("h2", { className: "card-name", children: c.name }) }), Object(d.jsxs)("section", { className: "card-body", children: [Object(d.jsx)(Nt, { attributes: p }), Object(d.jsx)(At, { card: c, searchType: n, loading: l })] }), Object(d.jsx)("footer", { className: "card-footer", children: "search-catalog" === n ? Object(d.jsx)(Et, { card: c }) : "search-collection" === n ? Object(d.jsx)(It, { card: c }) : Object(d.jsx)(Tt, { card: c, setLoading: function (e) { j(e) } }) })] }) }) })), Pt = function (e) { var t = e.open, c = e.children; return t ? (document.body.classList.add("scroll-none"), Object(s.createPortal)(Object(d.jsx)("div", { className: "overlay", children: Object(d.jsx)("div", { className: "modal", children: c }) }), document.body)) : (document.body.classList.remove("scroll-none"), null) }, Dt = function (e) { var t = e.children, c = e.transform, a = e.handleClick; return Object(d.jsx)(d.Fragment, { children: c ? Object(d.jsx)("div", { className: "expanded-card transform-card", onClick: function (e) { !function (e) { "reduce-card" === e.target.id ? a(e) : e.target.classList.contains("transform-card-btn") && (document.querySelector(".transform-card-inner").classList.toggle("rotate-y"), setTimeout((function () { document.getElementsByClassName("transform-card-btn")[0].classList.toggle("d-none") }), 100)) }(e) }, children: Object(d.jsxs)("div", { className: "transform-card-inner", children: [Object(d.jsxs)("div", { className: "transform-card-recto", children: [t[0][0], t[1]] }), Object(d.jsxs)("div", { className: "transform-card-verso", children: [t[0][1], t[1]] })] }) }) : Object(d.jsx)("div", { className: "expanded-card", onClick: a, children: t }) }) }, zt = Object(a.forwardRef)((function (e, t) { var c = e.response, a = e.handleClick; return Object(d.jsxs)("div", { className: "modal-message", children: [Object(d.jsx)("header", { className: "modal-header bg-green", children: Object(d.jsx)("div", { className: "modal-title", children: Object(d.jsx)("h2", { className: "color-green fw-500", children: c.message }) }) }), Object(d.jsx)("section", { className: "modal-check", children: Object(d.jsx)(ee.b, { className: "color-green" }) }), Object(d.jsx)("footer", { className: "card-footer", children: Object(d.jsx)("div", { className: "btn-container hide", children: Object(d.jsx)("button", { id: "back-to-search", type: "button", onClick: a, ref: t }) }) })] }) })), Mt = function (e) { var t = Object.keys(e), c = {}; return t.forEach((function (t) { e[t] || (console.log(e[t]), c = Object(u.a)(Object(u.a)({}, c), {}, Object(ct.a)({}, t, "".concat(at(t), " is required")))) })), c }, Lt = { quantity: "", price: "", condition: "", language: "" }, Jt = function (e) { var t = e.card, c = e.searchType, n = e.attributes, s = e.handleClick, r = Object(a.useState)(Lt), i = Object(o.a)(r, 2), j = i[0], b = i[1], m = Object(a.useState)(Lt), O = Object(o.a)(m, 2), f = O[0], x = O[1], g = Object(a.useState)(!1), v = Object(o.a)(g, 2), y = v[0], N = v[1], S = Object(a.useState)(!1), w = Object(o.a)(S, 2), k = w[0], C = w[1], A = Object(a.useState)(!1), E = Object(o.a)(A, 2), I = E[0], q = E[1], R = Object(a.useState)({ isUpdated: !1, message: "" }), T = Object(o.a)(R, 2), F = T[0], P = T[1], D = Object(a.useRef)(null), z = Object(a.useRef)(null), M = Object(a.useRef)(null), L = Object(a.useRef)(null), J = Object(a.useRef)(null), U = Object(a.useRef)(null), H = Object(a.useRef)(null), B = Object(l.q)(), G = Object(l.o)(), Q = Object(l.s)().query, Z = p().auth, Y = function (e) { setTimeout((function () { e.click() }), 1500) }; Object(a.useEffect)((function () { if (k) { var e, a; N(!0); var n = { cardName: null === (e = t.name) || void 0 === e ? void 0 : e.trim(), price: parseFloat(f.price), quantity: parseInt(f.quantity), condition: f.condition, language: f.language, comment: null === (a = f.comment) || void 0 === a ? void 0 : a.trim(), published: f.published, datePublished: Date.now() }, s = new Headers; s.append("Content-Type", "application/json"), s.append("auth-token", Z.token); var r = { method: "PATCH", headers: s, body: JSON.stringify(n) }; fetch("".concat(h.serverURL, "/api/cards/edit/").concat(t._id, "/").concat(Z.id), r).then((function (e) { return e.json() })).then((function (e) { N(!1); var a = e.cards, n = e.isUpdated, s = e.message; if (P({ isUpdated: n, message: s }), "all-cards" !== Q) { var r = { cards: a.filter((function (e) { return e.name.toLowerCase() === t.name.toLowerCase() })), searchType: c }; B("".concat(G.pathname), { state: r }), localStorage.setItem("search-result", JSON.stringify(r)), Y(D.current) } else { var i = { cards: a, searchType: c }; B("".concat(G.pathname), { state: i }), localStorage.setItem("search-result", JSON.stringify(i)), Y(D.current) } })).catch((function (e) { N(!1), console.log("error", e) })) } }), [k]), Object(a.useEffect)((function () { z.current.focus(), x({ price: t._price ? t._price : "", quantity: t._quantity ? t._quantity : "", condition: t._condition ? t._condition : "", language: t._language ? t._language : "", comment: t._comment, published: t._is_published }) }), []), Object(a.useEffect)((function () { 0 === Object.keys(j).length && I ? C(!0) : q(!1) }), [j]); var X = function (e) { x(Object(u.a)(Object(u.a)({}, f), {}, Object(ct.a)({}, e.target.name, e.target.value))) }, K = function (e) { x(Object(u.a)(Object(u.a)({}, f), {}, { published: !f.published })) }, W = function (e) { if (j[e.target.name]) { var t = Object(u.a)({}, j); delete t[e.target.name], b(t) } }, V = function (e) { e.preventDefault(); f.comment, f.published; var t = Object(it.a)(f, ["comment", "published"]), c = Mt(t); q(!0), b(c) }; return Object(d.jsx)("div", { className: "modal-content ".concat(y ? "border-light" : F.isUpdated ? "border-success" : "border-blue"), children: y ? Object(d.jsx)(Ze, {}) : Object(d.jsx)(d.Fragment, { children: F.isUpdated ? Object(d.jsx)(zt, { response: F, handleClick: s, ref: D }) : Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("header", { className: "modal-header bg-blue", children: Object(d.jsx)("div", { className: "modal-title", children: Object(d.jsx)("h2", { className: "fw-500", children: "Edit Card" }) }) }), Object(d.jsxs)("div", { className: "modal-body", children: [Object(d.jsxs)("div", { className: "card-body", children: [Object(d.jsx)("section", { className: "card-section", children: Object(d.jsx)(vt, { attributes: n }) }), Object(d.jsx)("section", { className: "card-section", children: Object(d.jsx)(Ct, { card: t }) })] }), Object(d.jsx)("div", { className: "edit-card", children: Object(d.jsxs)("form", { className: "edit-form", id: "edit-form", name: "edit-form", onSubmit: V, noValidate: !0, children: [Object(d.jsxs)("div", { className: "form-element flex gap-1", children: [Object(d.jsxs)("div", { className: "edit-option", children: [Object(d.jsx)("label", { htmlFor: "price", className: j.price && "color-danger", children: j.price ? j.price : "Price" }), Object(d.jsx)("input", { className: j.price ? "border-danger danger-padding" : "", id: "price", type: "number", name: "price", value: f.price, onChange: X, onFocus: W, min: "0.25", max: "10000", placeholder: "Price", ref: z })] }), Object(d.jsxs)("div", { className: "edit-option", children: [Object(d.jsx)("label", { htmlFor: "quantity", className: j.quantity && "color-danger", children: j.quantity ? j.quantity : "Quantity" }), Object(d.jsx)("input", { className: j.quantity ? "border-danger danger-padding" : "", id: "quantity", type: "number", name: "quantity", value: f.quantity, onChange: X, onFocus: W, min: "0", max: "1000", placeholder: "Quantity", ref: L })] })] }), Object(d.jsxs)("div", { className: "form-element", children: [Object(d.jsx)("label", { htmlFor: "condition", className: j.condition && "color-danger", children: j.condition ? j.condition : "Card Condition" }), Object(d.jsxs)("select", { className: j.condition ? "border-danger danger-padding" : "", id: "condition", type: "text", name: "condition", value: f.condition, onChange: X, onFocus: W, ref: M, children: [Object(d.jsx)("option", { value: "", children: "Choose a condition" }), Object(d.jsx)("option", { value: "m", children: "Mint" }), Object(d.jsx)("option", { value: "nm", children: "Near Mint" }), Object(d.jsx)("option", { value: "lp", children: "Lightly Played" }), Object(d.jsx)("option", { value: "mp", children: "Moderatly Played" }), Object(d.jsx)("option", { value: "hp", children: "Heavely Played" }), Object(d.jsx)("option", { value: "d", children: "Damaged" })] })] }), Object(d.jsxs)("div", { className: "form-element", children: [Object(d.jsx)("label", { htmlFor: "language", className: j.language && "color-danger", children: j.language ? j.language : "Card Condition" }), Object(d.jsxs)("select", { className: j.language ? "border-danger danger-padding" : "", id: "language", name: "language", value: f.language, onChange: X, onFocus: W, ref: J, children: [Object(d.jsx)("option", { value: "", children: "Choose a language" }), Object(d.jsx)("option", { value: "en", children: "English" }), Object(d.jsx)("option", { value: "es", children: "Spanish" }), Object(d.jsx)("option", { value: "fr", children: "French" }), Object(d.jsx)("option", { value: "de", children: "German" }), Object(d.jsx)("option", { value: "it", children: "Italian" }), Object(d.jsx)("option", { value: "pt", children: "Portuguese" }), Object(d.jsx)("option", { value: "ja", children: "Japanese" }), Object(d.jsx)("option", { value: "ko", children: "Korean" }), Object(d.jsx)("option", { value: "ru", children: "Russian" }), Object(d.jsx)("option", { value: "zhs", children: "Simplified Chinese" }), Object(d.jsx)("option", { value: "zht", children: "Traditional Chinese" }), Object(d.jsx)("option", { value: "ph", children: "Phyrexian" })] })] }), Object(d.jsxs)("div", { className: "form-element", children: [Object(d.jsx)("label", { htmlFor: "comment", className: j.comment && "color-danger", children: j.comment ? j.comment : "Additional Information" }), Object(d.jsx)("textarea", { className: j.comment && "border-danger danger-padding", id: "comment", name: "comment", value: f.comment, onChange: X, onFocus: W, placeholder: "", ref: U })] }), Object(d.jsxs)("div", { className: "form-element", children: [Object(d.jsx)("p", { children: "Card Status" }), Object(d.jsxs)("div", { className: "card-status flex gap-1", children: [Object(d.jsxs)("div", { className: "edit-option status flex align-center space-between", children: [Object(d.jsx)("label", { htmlFor: "published", children: "Published" }), Object(d.jsx)("input", { type: "radio", name: "published", id: "published", onChange: K, value: f.published, checked: f.published, ref: H })] }), Object(d.jsxs)("div", { className: "edit-option status flex align-center space-between", children: [Object(d.jsx)("label", { htmlFor: "unpublished", children: "Unpublished" }), Object(d.jsx)("input", { type: "radio", name: "published", id: "unpublished", onChange: K, value: !f.published, checked: !f.published })] })] })] })] }) })] }), Object(d.jsx)("footer", { className: "modal-footer bg-blue-light", children: Object(d.jsxs)("div", { className: "card-btns-wrapper", children: [Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "cancel", className: "btn bg-yellow-2 color-light", type: "button", onClick: s, children: "Go Back" }) }), Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "confirm-publish", className: "btn bg-green color-light", type: "button", onClick: V, children: "Submit" }) })] }) })] }) }) }) }, Ut = function (e) { var t = e.card, c = e.searchType, n = e.attributes, s = e.handleClick, r = Object(a.useState)({ isDeleted: !1, message: Object(d.jsxs)(d.Fragment, { children: [Object(d.jsxs)("p", { children: ["You are about to delete ", Object(d.jsx)("strong", { children: t.name }), " from your collection."] }), Object(d.jsx)("p", { children: "This will remove all the information associated with this card." })] }) }), i = Object(o.a)(r, 2), j = i[0], b = i[1], u = Object(a.useState)(!1), m = Object(o.a)(u, 2), O = m[0], f = m[1], x = Object(a.useRef)(null), g = Object(l.q)(), v = Object(l.o)(), y = Object(l.s)().query, N = p().auth, S = function (e) { setTimeout((function () { e.click() }), 1500) }; return Object(d.jsx)("div", { className: "modal-content ".concat(O ? "border-light" : j.isDeleted ? "border-success" : "border-danger"), children: O ? Object(d.jsx)(Ze, {}) : Object(d.jsx)(d.Fragment, { children: j.isDeleted ? Object(d.jsx)(zt, { response: j, handleClick: s, ref: x }) : Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("header", { className: "modal-header bg-red", children: Object(d.jsx)("div", { className: "modal-title", children: Object(d.jsx)("h2", { className: "fw-500", children: "Delete Card" }) }) }), Object(d.jsxs)("div", { className: "modal-body", children: [Object(d.jsxs)("div", { className: "card-body", children: [Object(d.jsx)("section", { className: "card-section", children: Object(d.jsx)(vt, { attributes: n }) }), Object(d.jsx)("section", { className: "card-section", children: Object(d.jsx)(Ct, { card: t }) })] }), Object(d.jsx)("div", { className: "card-message", children: j.message })] }), Object(d.jsx)("footer", { className: "modal-footer bg-red-light", children: Object(d.jsxs)("div", { className: "card-btns-wrapper", children: [Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "cancel", className: "btn bg-yellow-2 color-light", type: "button", onClick: s, children: "Go Back" }) }), Object(d.jsx)("div", { className: "btn-container", children: Object(d.jsx)("button", { id: "confirm-delete", className: "btn bg-red color-light", type: "button", onClick: s, onMouseDown: function (e) { return function (e) { f(!0); var a = new Headers; a.append("Content-Type", "application/json"), a.append("auth-token", N.token); var n = { cardID: t._id, userID: N.id }, s = { method: "DELETE", headers: a, body: JSON.stringify(n) }; fetch("".concat(h.serverURL, "/api/cards/delete"), s).then((function (e) { return e.ok ? e.json() : e.json().then((function (e) { throw f(!1), new Error(JSON.stringify(e)) })) })).then((function (a) { f(!1); var n = a.cards, s = a.isDeleted, r = a.message; if (b({ isDeleted: s, message: r }), "all-cards" !== y) { console.log(c); var i = { cards: n.filter((function (e) { return e.name.toLowerCase() === t.name.toLowerCase() })), searchType: c }; g("".concat(e.pathname), { state: i }), localStorage.setItem("search-result", JSON.stringify(i)), S(x.current) } else { var l = { cards: n, searchType: c }; g("".concat(e.pathname), { state: l }), localStorage.setItem("search-result", JSON.stringify(l)), S(x.current) } })).catch((function (e) { f(!1), console.log("error", e) })) }(v) }, children: "Confirm" }) })] }) })] }) }) }) }, Ht = c(39), Bt = function () { return Object(d.jsx)("button", { className: "transform-card-btn", type: "button", children: Object(d.jsx)(Ht.a, {}) }) }, Gt = function (e, t) { var c = { open: !1, component: null }, n = "back-to-search", s = "confirm-delete", r = "delete-card", i = "expand-card", l = "cancel", j = "edit-card", b = "reduce-card", h = Object(a.useReducer)((function (a, o) { var h; switch (o.type) { case i: return (null === (h = o.payload.card.card_faces) || void 0 === h ? void 0 : h.length) ? { open: !0, component: Object(d.jsxs)(Dt, { transform: !0, handleClick: t, children: [o.payload.ImageComponent, Object(d.jsx)(Bt, { handleClick: t })] }) } : { open: !0, component: Object(d.jsx)(Dt, { transform: !1, handleClick: t, children: o.payload.ImageComponent }) }; case r: return { open: !0, component: Object(d.jsx)(Ut, { attributes: Object(u.a)(Object(u.a)({}, o.payload.attributes), {}, { id: "confirm-delete" }), searchType: e, card: o.payload.card, handleClick: t }) }; case j: return { open: !0, component: Object(d.jsx)(Jt, { attributes: Object(u.a)(Object(u.a)({}, o.payload.attributes), {}, { id: "confirm-edit" }), searchType: e, card: o.payload.card, handleClick: t }) }; case b: case s: case l: case n: default: return c } }), c), m = Object(o.a)(h, 2), O = m[0], p = m[1]; return [O, { updateState: function (e, t, c, a) { p({ type: e, payload: { card: t, attributes: c, ImageComponent: a } }) } }] }, Qt = function () { var e = Object(l.o)(), t = Object(l.q)(), c = e.state || JSON.parse(localStorage.getItem("search-result")), n = c.cards, s = c.searchType, r = Object(a.useRef)(null); Object(a.useEffect)((function () { if (n.length) { Promise.all(n.map((function (e) { return function (e) { return new Promise((function (t, c) { var a, n, s = new Image, r = (null === (a = e.image_uris) || void 0 === a ? void 0 : a.normal) || (null === (n = e.card_faces[0]) || void 0 === n ? void 0 : n.image_uris.normal); s.src = r, s.onload = function () { return t(e) }, s.onerror = function (e) { return c(e) } })) }(e) }))).then((function (e) { return console.log(e) })).catch((function (e) { return console.log("Image load has failed", e) })) } else setTimeout((function () { t("/search-collection") }), 1500) }), [e]); var i = Gt(s, (function (e) { return O(e) })), j = Object(o.a)(i, 2), b = j[0], u = b.open, h = b.component, m = j[1].updateState; function O(e, t, c, a) { e.stopPropagation(), m(e.target.id, t, c, a) } return Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)(Pt, { open: u, children: h }), Object(d.jsxs)("header", { className: "search-result-header", children: [Object(d.jsx)("button", { className: "back-btn", type: "button", onClick: function () { t("search-collection" === s ? "/me/collection" : -1) }, children: "Back To Search" }), Object(d.jsx)("span", { className: "space-1", children: n ? "".concat(n.length, " ").concat(n.length > 1 ? "Results" : "Result") : "No results" })] }), Object(d.jsxs)(d.Fragment, { children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Search Results" }) }), Object(d.jsx)("main", { className: "main", children: Object(d.jsx)("div", { className: "cards", children: n && n.map((function (e, t) { return Object(d.jsx)(Ft, { card: e, searchType: s, handleClick: O, ref: r }, t) })) }) })] })] }) }, Zt = function () { var e = Object(l.q)(); return Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "404" }) }), Object(d.jsxs)("main", { className: "main not-found", children: [Object(d.jsx)("p", { children: "The page you requested does not exist" }), Object(d.jsx)(qt, { attributes: { id: "", style: "btn color-light bg-blue", type: "button", value: "Back to Homepage", status: !1 }, handleClick: function () { e("/", { replace: !0 }) } })] })] }) }, Yt = function () { var e = Object(l.s)().cardName, t = Object(l.q)(); return Object(d.jsxs)("div", { className: "not-found", children: [Object(d.jsx)("header", { children: Object(d.jsx)("section", { className: "banner not-found-banner" }) }), Object(d.jsxs)("main", { className: "main", children: [Object(d.jsx)("h2", { children: "Oops!" }), Object(d.jsxs)("p", { children: ['No results were found for "', e, '"'] })] }), Object(d.jsx)("footer", { children: Object(d.jsx)("button", { className: "not-found-btn", onClick: function () { return t(-1) }, children: " Go Back " }) })] }) }, Xt = c(13), Kt = Q.a.div(me || (me = Object(B.a)([""]))), Wt = Q.a.div(Oe || (Oe = Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  font-size: 0.9rem;\n  width: 100%;\n"]))), Vt = Q.a.div(pe || (pe = Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0.5em;\n  font-size: 0.8rem;\n"]))), _t = Q.a.footer(fe || (fe = Object(B.a)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100%;\n  padding: 0.5em 1em 1em 0;\n  border-top: 1px solid #e4e4e4;\n\n  h4 {\n    margin-right: 1em;\n  }\n\n  p {\n    font-weight: 900;\n  }\n"]))), $t = Q.a.div(xe || (xe = Object(B.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  padding: 1em 1em 0.5em 0;\n  border-bottom: 1px solid #e4e4e4;\n\n  p {\n    font-weight: 900;\n  }\n"]))), ec = Q.a.div(ge || (ge = Object(B.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 10em;\n  padding: 0.5em 0;\n\n  select {\n    padding: 0.2em;\n    width: 4em;\n  }\n\n  button {\n    padding: 0.5em 1em;\n    color: #fff;\n    background: #dc3545;\n    border: 1px solid #dc3545;\n  }\n"]))), tc = (Q.a.header(ve || (ve = Object(B.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  padding: 1em;\n"]))), Q.a.div(ye || (ye = Object(B.a)(["\n  width: 75%;\n  display: flex;\n  flex-direction: column;\n"]))), Q.a.main(Ne || (Ne = Object(B.a)(["\n  display: flex;\n  width: 100%;\n  padding: 0 1em;\n  background: #e1e8ed;\n"]))), Q.a.aside(Se || (Se = Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 25%;\n  background: #fff;\n  height: 20vh;\n  padding: 1em;\n  margin: 4em 0 1em 1em;\n\n  h3 {\n    text-align: center;\n    padding-bottom: em;\n  }\n\n  p {\n  }\n"]))), Q.a.button(we || (we = Object(B.a)(["\n  width: 100%;\n  padding: 1em 0;\n  font-size: 1rem;\n\n  background: #ffc107;\n  border: none;\n"]))), Q.a.div(ke || (ke = Object(B.a)(["\n  display: flex;\n  margin-bottom: 1em;\n\n  background: #fff;\n  width: 100%;\n"])))), cc = Q.a.div(Ce || (Ce = Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 20%;\n  padding: 0.8em;\n"]))), ac = Q.a.img(Ae || (Ae = Object(B.a)(["\n  display: block;\n  width: 100%;\n"]))), nc = function (e) { var t = e.item, c = e.setIsUpdating, n = Object(a.useState)(!1), s = Object(o.a)(n, 2), r = s[0], i = s[1], l = Object(a.useState)(1), j = Object(o.a)(l, 2), b = j[0], u = j[1], m = Object(a.useContext)(y), O = m.cartItems, p = m.setCartItems; return Object(d.jsxs)(tc, { className: r ? "loading" : "", children: [Object(d.jsx)(cc, { children: Object(d.jsx)(ac, { src: t.image_uris.png }) }), Object(d.jsxs)(Wt, { children: [Object(d.jsxs)($t, { children: [Object(d.jsx)("h3", { children: t.name }), Object(d.jsxs)("p", { children: ["$ ", t.price, ".00"] })] }), Object(d.jsxs)(Vt, { children: [Object(d.jsxs)(Kt, { children: [Object(d.jsxs)("p", { children: ["Seller: ", t.userName] }), Object(d.jsxs)("p", { children: ["Ships from: ", t.userCountry] }), Object(d.jsxs)("p", { children: ["Card Condition: ", t.condition.toUpperCase()] })] }), Object(d.jsxs)(ec, { children: [Object(d.jsx)("select", { onChange: function (e) { !function (e, t) { O.forEach((function (a) { a === t && (a.quantity_selected = parseInt(e.target.value)), i(!0), c(!0), fetch("".concat(h.serverURL, "/api/catalog/").concat(t.name, "/").concat(t._id, "/").concat(t.quantity_selected), { method: "GET", header: { "Content-Type": "application/json" } }).then((function (e) { return e.json() })).then((function (e) { if (!e.data.isQuantityAvailable) return console.log("Quantity not available"); i(!1), c(!1), u(a.quantity_selected); var t = Object(Xt.a)(O); p(t) })) })) }(e, t) }, children: Object(Xt.a)(new Array(t.quantity)).map((function (e, c) { return c + 1 === t.quantity_selected ? Object(d.jsx)("option", { value: c + 1, selected: !0, children: c + 1 }, c) : Object(d.jsx)("option", { value: c + 1, children: c + 1 }, c) })) }), Object(d.jsx)("button", { type: "button", onClick: function () { return function (e) { O.forEach((function (t, c) { t === e && O.splice(c, 1); var a = Object(Xt.a)(O); p(a) })) }(t) }, children: "Delete" })] })] }), Object(d.jsxs)(_t, { children: [Object(d.jsx)("h4", { children: "Total:" }), Object(d.jsx)("p", { children: b && "$ ".concat(t.quantity_selected * t.price, ".00") })] })] })] }) }; var sc, rc, ic, lc, oc, dc, jc, bc, uc, hc, mc, Oc, pc, fc, xc, gc, vc, yc, Nc, Sc, wc, kc, Cc, Ac, Ec, Ic, qc, Rc, Tc, Fc, Pc = Q.a.header(Ee || (Ee = Object(B.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  padding: 1em;\n"]))), Dc = Q.a.div(Ie || (Ie = Object(B.a)(["\n  width: 75%;\n  display: flex;\n  flex-direction: column;\n"]))), zc = Q.a.main(qe || (qe = Object(B.a)(["\n  display: flex;\n  width: 100%;\n  padding: 0 1em;\n  background: #e1e8ed;\n"]))), Mc = Q.a.aside(Re || (Re = Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 25%;\n  background: #fff;\n  height: 20vh;\n  padding: 1em;\n  margin: 4em 0 1em 1em;\n\n  h3 {\n    text-align: center;\n    padding-bottom: em;\n  }\n\n  p {\n  }\n"]))), Lc = Q.a.button(Te || (Te = Object(B.a)(["\n  width: 100%;\n  padding: 1em 0;\n  font-size: 1rem;\n\n  background: #ffc107;\n  border: none;\n"]))), Jc = function () { var e = Object(a.useState)(0), t = Object(o.a)(e, 2), c = t[0], n = t[1], s = Object(a.useState)(0), r = Object(o.a)(s, 2), i = r[0], j = r[1], b = Object(a.useState)(!1), u = Object(o.a)(b, 2), m = (u[0], u[1], Object(a.useState)(!1)), O = Object(o.a)(m, 2), f = O[0], x = O[1], g = p().auth, v = Object(a.useContext)(y), N = v.cartItems, S = (v.setCartItems, Object(l.q)()); return Object(a.useEffect)((function () { var e = 0, t = 0; N.forEach((function (c) { t += c.quantity_selected, e += c.quantity_selected * c.price })), j(e), n(t) }), [N]), Object(d.jsxs)("div", { className: "content", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Shopping Cart" }) }), Object(d.jsx)("main", { className: "main", children: Object(d.jsxs)(zc, { children: [N.length > 0 ? Object(d.jsxs)(Dc, { children: [Object(d.jsxs)(Pc, { children: [Object(d.jsx)("h3", { children: "Items" }), Object(d.jsx)("h3", { children: "Price" })] }), N && N.map((function (e) { return Object(d.jsx)(nc, { item: e, setIsUpdating: x }) }))] }) : Object(d.jsx)("div", { children: "Your Cart is Empty" }), N.length > 0 ? Object(d.jsxs)(Mc, { className: f ? "loading" : "", children: [Object(d.jsx)("h3", { children: "Subtotal" }), Object(d.jsxs)("p", { children: ["(".concat(c, " items): "), Object(d.jsx)("strong", { children: "$ ".concat(i, ".00") })] }), Object(d.jsx)(Lc, { type: "button", onClick: function () { !function () { if (g) { var e = { userID: g.id, cartItems: N }, t = { method: "PATCH", headers: { "Content-Type": "application/json", "auth-token": g.token }, body: JSON.stringify(e) }; fetch("".concat(h.serverURL, "/api/cart/"), t).then((function (e) { return e.json() })).then((function (e) { console.log(e) })).catch((function (e) { return console.log("error", e) })) } else S("/login") }() }, children: "Checkout" })] }) : ""] }) })] }) }, Uc = function (e) { return e.split("/")[2] }, Hc = (Q.a.span(sc || (sc = Object(B.a)(["\n  display: block;\n  margin-left: 10px;\n"]))), Q.a.aside(rc || (rc = Object(B.a)(["\n  width: 98%;\n  padding: 10px;\n  border: 1px solid #f5f8fa;\n"]))), Q.a.ul(ic || (ic = Object(B.a)(["\n  margin-top: 20px;\n  margin-bottom: 40px;\n"]))), Q.a.li(lc || (lc = Object(B.a)(["\n  a {\n    display: block;\n    width: 100%;\n    padding: 8px 10px;\n    border: 1px solid #fff;\n  }\n  a:hover {\n    background: #f5f8fa;\n    border: 1px solid #f1f9ff;\n  }\n"])))), Bc = (Q.a.button(oc || (oc = Object(B.a)(["\n  text-align: center;\n  width: 100%;\n  padding: 10px 0;\n  background: #28a745;\n  color: #fff;\n  font-size: 1rem;\n  border: 2px solid #28a745;\n"]))), function (e) { var t = e.isTrash, c = e.checkedState, n = e.setMessages, s = e.setLoading, r = e.messages, o = e.user, b = Object(l.o)(), u = Object(l.q)(), m = Object(a.useContext)(j), O = m.pathname, p = m.setPathname; Object(a.useEffect)((function () { O !== Uc(b.pathname) && localStorage.removeItem("message"), p(Uc(b.pathname)) }), [b]); return Object(d.jsx)("div", { className: ".mailbox-sidebar-container", children: Object(d.jsxs)("div", { className: "mailbox-sidebar", children: [Object(d.jsxs)("div", { className: "mailbox-sidebar-header", children: [Object(d.jsx)("button", { className: "compose-message", type: "button", onClick: function () { p("message"), u("/mail/message") }, children: "Compose" }), t && b.pathname.includes("trash") ? Object(d.jsx)("button", { className: "remove-message", type: "button", onClick: function () { var e = []; c.forEach((function (t, c) { t && e.push(r[c]) })); var t = { userID: o.id, toBeDeleted: e }, a = new Headers; a.append("Content-type", "application/json"), a.append("auth-token", o.token); var s = { method: "DELETE", headers: a, body: JSON.stringify(t) }; fetch("".concat(h.serverURL, "/api/messages/delete"), s).then((function (e) { return e.json() })).then((function (e) { localStorage.removeItem("message"), n(e.data.length > 0 ? e.data : []), p(Uc(b.pathname)), u("/mail/".concat(O)) })) }, children: "Delete" }) : t ? Object(d.jsx)("button", { className: "remove-message", type: "button", onClick: function (e) { var t = []; localStorage.getItem("message") ? t.push(JSON.parse(localStorage.getItem("message"))) : c.forEach((function (e, c) { e && t.push(r[c]) })), s(!0); var a = { userID: o.id, trashed: t, pathname: O }, i = new Headers; i.append("Content-type", "application/json"), i.append("auth-token", o.token); var l = { method: "PATCH", headers: i, body: JSON.stringify(a) }; fetch("".concat(h.serverURL, "/api/messages/"), l).then((function (e) { return e.json() })).then((function (e) { s(!1), localStorage.removeItem("message"), n(e.data), p(Uc(b.pathname)), u("/mail/".concat(O)) })) }, children: "Trash" }) : ""] }), Object(d.jsxs)("ul", { className: "mailbox-sidebar-options", children: [Object(d.jsx)(Hc, { children: Object(d.jsx)(i.b, { style: { border: b.pathname.includes("inbox") && "1px solid #e1e8ed" }, to: "/mail/inbox", children: "Inbox" }) }), Object(d.jsx)(Hc, { children: Object(d.jsx)(i.b, { style: { border: b.pathname.includes("unread") && "1px solid #e1e8ed" }, to: "/mail/unread", children: "Unread" }) }), Object(d.jsx)(Hc, { children: Object(d.jsx)(i.b, { style: { border: b.pathname.includes("sent") && "1px solid #e1e8ed" }, to: "/mail/sent", children: "Sent" }) }), Object(d.jsx)(Hc, { children: Object(d.jsx)(i.b, { style: { border: b.pathname.includes("trash") && "1px solid #e1e8ed" }, to: "/mail/trash", children: "Trash" }) })] })] }) }) }), Gc = (Q.a.div(dc || (dc = Object(B.a)(["\n  position: relative;\n  width: 10%;\n"]))), Q.a.input(jc || (jc = Object(B.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]))), Q.a.div(bc || (bc = Object(B.a)(["\n  width: 10%;\n  display: flex;\n  justify-content: flex-end;\n"]))), Q.a.header(uc || (uc = Object(B.a)(["\n  position: relative;\n  display: flex;\n  width: 100%;\n  padding: 10px 0;\n  color: #fff;\n  background: #636363;\n"]))), Q.a.div(hc || (hc = Object(B.a)([""]))), Q.a.div(mc || (mc = Object(B.a)(["\n  width: 50%;\n"]))), Q.a.h2(Oc || (Oc = Object(B.a)(["\n  font-size: 1rem;\n  font-weight: normal;\n  margin-left: -7px;\n  padding-left: 0;\n"]))), function (e) { var t = e.checked, c = e.handleChange, a = e.pathname; return Object(d.jsxs)("header", { className: "mailbox-header", children: [Object(d.jsx)("input", { className: "mail-checkbox", type: "checkbox", id: "checkAll", checked: t, onChange: c }), Object(d.jsx)("div", { className: "mailbox-section-1", children: "sent" === a ? Object(d.jsx)("h2", { className: "row-to", children: "To" }) : "trash" === a ? Object(d.jsx)("h2", {}) : Object(d.jsx)("h2", { className: "row-from", children: "From" }) }), Object(d.jsxs)("div", { className: "mailbox-section-2", children: [Object(d.jsx)("h2", { className: "row-subject", children: "Subject" }), Object(d.jsx)("h2", { className: "row-sent", children: "Sent" })] })] }) }), Qc = { longDate: function (e) { var t = new Date(e), c = t.getDate(), a = Zc(t.getMonth() + 1), n = t.getFullYear(); return console.log(t), "".concat(c, " ").concat(a, " ").concat(n) }, shortDate: function (e) { var t = function (e) { return e < 10 ? "0".concat(e) : e }, c = new Date(e); return "".concat(c.getFullYear().toString().substring(2), "/").concat(t(c.getMonth() + 1), "/").concat(t(c.getDate())) } }, Zc = function (e) { var t = ""; switch (parseInt(e)) { case 1: t = "Jan"; break; case 2: t = "Feb"; break; case 3: t = "Mar"; break; case 4: t = "Apr"; break; case 5: t = "May"; break; case 6: t = "Jun"; break; case 7: t = "Jul"; break; case 8: t = "Aug"; break; case 9: t = "Sep"; break; case 10: t = "Oct"; break; case 11: t = "Nov"; break; default: t = "Dec" }return t }, Yc = Qc, Xc = (Q.a.div(pc || (pc = Object(B.a)(["\n  position: relative;\n  width: 10%;\n"]))), Q.a.div(fc || (fc = Object(B.a)(["\n  font-size: 0.9rem;\n"]))), Q.a.div(xc || (xc = Object(B.a)(["\n  width: 30%;\n"]))), Object(Q.a)(i.b)(gc || (gc = Object(B.a)([""]))), Q.a.div(vc || (vc = Object(B.a)(["\n  width: 50%;\n"]))), function (e) { var t = e.handleChange, c = e.setCurrentMessage, n = e.checkedState, s = e.message, r = e.index, l = Object(a.useContext)(j).pathname; return Object(d.jsxs)("div", { className: "mail-row", style: { backgroundColor: s.isRead ? "#e3e3e3" : "" }, children: [Object(d.jsx)("input", { className: "mail-checkbox", type: "checkbox", id: "checkbox".concat(r), checked: n[r], onChange: function (e) { t(e, r) }, style: { background: s.read ? "#f5f8fa" : "" } }), Object(d.jsxs)(i.b, { className: "mail-message", onClick: function (e) { e.stopPropagation(), c(s), localStorage.setItem("message", JSON.stringify(s)) }, style: { backgroundColor: s.isRead ? "#e3e3e3" : "" }, to: "/mail/".concat(l, "/").concat(s._id), id: r, children: [Object(d.jsx)("div", { className: "mailbox-section-1", children: Object(d.jsx)("div", { className: "row-from", children: "inbox" === l || "unread" === l ? s.sender : "sent" === l ? s.recipient : "" }) }), Object(d.jsxs)("div", { className: "mailbox-row mailbox-section-2", children: [Object(d.jsx)("div", { className: "row-subject", children: s.subject }), Object(d.jsx)("div", { className: "row-sent", children: document.body.clientWidth > 500 ? Yc.longDate(s.date) : Yc.shortDate(s.date) })] })] })] }) }), Kc = function (e) { var t = {}; return e.recipient || (t.recipient = "Recipient is required"), e.subject || (t.subject = "Subject is Required"), e.text ? parseInt(e.text.length) > 500 && (t.text = "Message is too long") : t.text = "Message is required", t }, Wc = function (e, t, c, n) { var s = Object(a.useState)({ recipient: c, subject: n, text: "" }), r = Object(o.a)(s, 2), i = r[0], l = r[1], d = Object(a.useState)({}), j = Object(o.a)(d, 2), b = j[0], h = j[1], m = Object(a.useState)(!1), O = Object(o.a)(m, 2), p = O[0], f = O[1]; return Object(a.useEffect)((function () { 0 === Object.keys(b).length && p && e(i) }), [b]), { handleChange: function (e) { var t = e.target, c = t.name, a = t.value; l(Object(u.a)(Object(u.a)({}, i), {}, Object(ct.a)({}, c, a))) }, values: i, handleClick: function (e) { e.preventDefault(), h(t(i)), f(!0) }, errors: b } }, Vc = function () { var e = Object(l.q)(), t = Object(l.o)(), c = p().auth, n = Object(a.useContext)(j).setPathname, s = Object(a.useState)(t.state ? t.state.sender : ""), r = Object(o.a)(s, 2), i = r[0], b = r[1], u = Object(a.useState)(t.state ? t.state.subject : ""), m = Object(o.a)(u, 2), O = m[0], f = m[1], x = Object(a.useState)(""), g = Object(o.a)(x, 2), v = g[0], y = g[1], N = Object(a.useState)(""), S = Object(o.a)(N, 2), w = S[0], k = (S[1], Object(a.useState)("")), C = Object(o.a)(k, 2), A = C[0], E = (C[1], Object(a.useState)(!1)), I = Object(o.a)(E, 2), q = I[0], R = (I[1], Object(a.useState)(0)), T = Object(o.a)(R, 2), F = T[0], P = T[1], D = Object(a.useState)("#333333"), z = Object(o.a)(D, 2), M = z[0], L = z[1], J = Object(a.useState)(!1), U = Object(o.a)(J, 2), H = U[0], B = U[1], G = Object(a.useState)(""), Q = Object(o.a)(G, 2), Z = Q[0], Y = (Q[1], c.token), X = c.name, K = Object(a.useRef)(), W = Object(a.useRef)(), V = Object(a.useRef)(), _ = Wc((function (e) { b(e.recipient), f(e.subject), y(e.text), B(!0) }), Kc, i, O), $ = _.handleChange, ee = _.values, te = _.handleClick, ce = _.errors; return Object(a.useEffect)((function () { n(Uc(t.pathname)) })), Object(a.useEffect)((function () { if (!H) return console.log("invalid"); var t = new Headers; t.append("Content-Type", "application/json"), t.append("auth-token", Y); var c = { method: "POST", headers: t, body: JSON.stringify({ subject: O, userName: X, recipientName: i, text: v, isReply: q, messageID: w, threadID: A }) }; fetch("".concat(h.serverURL, "/api/messages"), c).then((function (e) { return e.json() })).then((function (t) { y(""), P(0), e("/mail/inbox") })).catch((function (e) { return console.log(e) })) }), [H]), Object(a.useEffect)((function () { switch (!0) { case F <= 500 && F > 450: L("#ffc107"); break; case F > 500: L("#dc3545"); break; default: L("#333333") } }), [F]), Object(d.jsx)("div", { className: "message-container", children: Object(d.jsx)("main", { className: "content", children: Object(d.jsx)("div", { className: "message-content", children: Object(d.jsxs)("section", { className: "message-form", children: [Object(d.jsx)("div", { className: "error-msg", children: Z }), Object(d.jsxs)("form", { children: [ce.recipient ? Object(d.jsx)("p", { className: "error", children: ce.recipient }) : Object(d.jsx)("label", { htmlFor: "recipient", children: "Recipient:" }), Object(d.jsx)("input", { className: ce.recipient && "empty-field", id: "recipient", type: "text", name: "recipient", value: t.state ? t.state.sender : ee.recipient, ref: K, onChange: $ }), ce.subject ? Object(d.jsx)("p", { className: "error", children: ce.subject }) : Object(d.jsx)("label", { htmlFor: "subject", children: "Subject:" }), Object(d.jsx)("input", { className: ce.subject && "empty-field", id: "subject", type: "text", name: "subject", value: t.state ? t.state.subject : ee.subject, ref: W, onChange: $ }), ce.text ? Object(d.jsx)("p", { className: "error", children: ce.text }) : Object(d.jsx)("label", { htmlFor: "text", children: "Message:" }), Object(d.jsx)("textarea", { className: ce.text && "empty-field", id: "text", name: "text", value: ee.text, ref: V, onChange: function (e) { P(e.target.value.length), $(e) } }), Object(d.jsxs)("footer", { children: [Object(d.jsxs)("span", { className: "word-counter", children: [Object(d.jsxs)("span", { style: { color: M }, children: [" ", F, " "] }), Object(d.jsxs)("span", { children: [" / ", 500] })] }), Object(d.jsx)("button", { className: "item-button success", type: "button", onClick: te, children: "Send" })] })] })] }) }) }) }) }, _c = (Q.a.main(yc || (yc = Object(B.a)([""]))), Q.a.p(Nc || (Nc = Object(B.a)([""])))), $c = (Q.a.section(Sc || (Sc = Object(B.a)(["\n  padding: 5px 10px;\n  border-bottom: 1px solid #e1e8ed;\n  margin-bottom: 25px;\n"]))), Q.a.div(wc || (wc = Object(B.a)(["\n  padding: 0 10px;\n"]))), Q.a.button(kc || (kc = Object(B.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 17%;\n  padding: 7px;\n  border: 1px solid #e1e8ed;\n  &:hover {\n    cursor: pointer;\n    opacity: 0.8;\n  }\n"]))), Object(Q.a)(i.b)(Cc || (Cc = Object(B.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 17%;\n  padding: 7px;\n  border: 1px solid #e1e8ed;\n  &:hover {\n    cursor: pointer;\n  }\n"]))), Q.a.div(Ac || (Ac = Object(B.a)(["\n  width: 100%;\n"]))), Q.a.div(Ec || (Ec = Object(B.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 10px;\n  margin-bottom: 25px;\n"]))), Q.a.a(Ic || (Ic = Object(B.a)(["\n  backgound: none;\n  padding: 0;\n  margin: 0;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]))), function (e) { var t = e.currentMessage, c = e.setMessages, n = e.setLoading, s = Object(l.q)(), r = Object(l.o)(), i = Object(a.useContext)(j), o = i.pathname, b = i.setPathname, u = p().auth; Object(a.useEffect)((function () { t || (t = JSON.parse(localStorage.getItem("message"))), localStorage.setItem("message", JSON.stringify(t)) }), []); var m = function (e) { b(null), n(!0); var c = { userID: u.id, messageID: t._id, isReadStatus: e }, a = new Headers; a.append("Content-type", "application/json"), a.append("auth-token", u.token); var i = { method: "PATCH", headers: a, body: JSON.stringify(c) }; fetch("".concat(h.serverURL, "/api/messages/read"), i).then((function (e) { return e.json() })).then((function (e) { n(!1), b(Uc(r.pathname)), t.isRead && s("/mail/".concat(o)) })).catch((function (e) { return console.log(e) })) }, O = function (e) { b(null), n(!0); var c = { userID: u.id, messageID: t._id, isSentMessage: t.isSent, isTrashStatus: e }, a = new Headers; a.append("Content-type", "application/json"), a.append("auth-token", u.token); var i = { method: "PATCH", headers: a, body: JSON.stringify(c) }; fetch("".concat(h.serverURL, "/api/messages/trash"), i).then((function (e) { return e.json() })).then((function (e) { n(!1), localStorage.removeItem("message"), b(Uc(r.pathname)), s("/mail/".concat(o)) })).catch((function (e) { return console.log(e) })) }; return Object(a.useEffect)((function () { t.isRead || m(!0) }), [r]), console.log(t), Object(d.jsxs)("div", { className: "message-container", children: [Object(d.jsxs)("div", { children: [Object(d.jsxs)("div", { className: "cancel", onClick: function () { localStorage.removeItem("message"), s("/mail/".concat(o)) }, children: [Object(d.jsx)(G.a, {}), " ", Object(d.jsxs)("p", { children: ["Back To ", o && o.charAt(0).toUpperCase() + o.substring(1)] })] }), Object(d.jsxs)("div", { className: "message-details", children: ["inbox" === o ? Object(d.jsxs)(_c, { children: ["From: ", Object(d.jsx)("strong", { children: t.sender })] }) : Object(d.jsxs)(_c, { children: ["To: ", Object(d.jsx)("strong", { children: t.recipient })] }), Object(d.jsxs)(_c, { children: ["Subject: ", Object(d.jsx)("strong", { children: t.subject })] }), Object(d.jsxs)("div", { children: ["Sent:", " ", Object(d.jsx)("strong", { children: Yc.longDate(t.date) })] })] }), Object(d.jsx)("div", { className: "mail-content", children: t.text })] }), Object(d.jsxs)("div", { className: "item-buttons column", children: [Object(d.jsx)("button", { className: "item-button row-3 success", type: "button", onClick: function () { s({ pathname: "/mail/message", state: t }) }, children: "Reply" }), "trash" === o ? t.isSent ? Object(d.jsx)("button", { className: "item-button row-3 primary", type: "button", onClick: function () { localStorage.removeItem("message"), O(!1) }, children: "Move to Sent" }) : Object(d.jsx)("button", { className: "item-button row-3 primary", type: "button", onClick: function () { localStorage.removeItem("message"), O(!1) }, children: "Move to Inbox" }) : "inbox" === o ? Object(d.jsx)("button", { className: "item-button row-3 primary", type: "button", onClick: function () { m(!1), t.isRead ? localStorage.removeItem("message") : s("/mail/inbox") }, children: "Mark As Unread" }) : "", "trash" !== o ? Object(d.jsx)("button", { className: "item-button row-3 danger", type: "button", onClick: function () { O(!0) }, children: "Move To Bin" }) : Object(d.jsx)("button", { className: "item-button row-3 danger", type: "button", onClick: function () { !function (e) { var t = [e]; n(!0); var a = { userID: u.id, toBeDeleted: t }, i = new Headers; i.append("Content-type", "application/json"), i.append("auth-token", u.token); var l = { method: "DELETE", headers: i, body: JSON.stringify(a) }; fetch("".concat(h.serverURL, "/api/messages/delete"), l).then((function (e) { return e.json() })).then((function (e) { console.log(e), b(Uc(r.pathname)), c(e.data.length > 0 ? e.data : []), localStorage.removeItem("message"), s("/mail/".concat(o)) })) }(t) }, children: "Delete" })] })] }) }), ea = (Q.a.div(qc || (qc = Object(B.a)(["\n  display: flex;\n"]))), Q.a.div(Rc || (Rc = Object(B.a)(["\n  width: 80%;\n  padding: 10px;\n  border: 1px solid #f5f8fa;\n"]))), Q.a.div(Tc || (Tc = Object(B.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n  height: 70vh;\n"])))), ta = (Q.a.aside(Fc || (Fc = Object(B.a)(["\n  width: 20%;\n"]))), function () { var e = p(), t = e.auth, c = e.setUnreadMail, n = Object(a.useContext)(j), s = n.pathname, r = n.setPathname, i = Object(l.o)(), b = Object(l.q)(), u = Object(a.useState)(!1), m = Object(o.a)(u, 2), O = m[0], f = m[1], x = Object(a.useState)([]), g = Object(o.a)(x, 2), v = g[0], y = g[1], N = Object(a.useState)(localStorage.getItem("message") ? JSON.parse(localStorage.getItem("message")) : {}), S = Object(o.a)(N, 2), w = S[0], k = S[1], C = Object(a.useState)(!1), A = Object(o.a)(C, 2), E = A[0], I = A[1], q = Object(a.useState)(!1), R = Object(o.a)(q, 2), T = R[0], F = R[1], P = Object(a.useState)([]), D = Object(o.a)(P, 2), z = D[0], M = D[1]; Object(a.useEffect)((function () { r(Uc(i.pathname)) }), []), Object(a.useEffect)((function () { if ("message" !== s && s) { f(!0), I(!1); var e = new Headers; e.append("Content-type", "application/json"), e.append("auth-token", t.token); var a = { method: "GET", headers: e }; fetch("".concat(h.serverURL, "/api/messages/").concat(s, "/").concat(t.id), a).then((function (e) { return e.json() })).then((function (e) { if (e.data) { if ("inbox" === s || "unread" === s) { var t = e.data.filter((function (e) { return !e.isRead && !e.isTrash })); c(t.length) } y(e.data) } else y([]); f(!1) })).catch((function (e) { return console.log(e) })) } }), [s]), Object(a.useEffect)((function () { localStorage.getItem("message") || M(new Array(v.length).fill(E)) }), [v]), Object(a.useEffect)((function () { M(new Array(v.length).fill(E)), console.log(E), F(!!E) }), [E]), Object(a.useEffect)((function () { var e = z.find((function (e) { return !0 === e })); E && (z.includes(!0) || I(!1)), F(!!e) }), [z]); var L = function (e, t) { if ("checkAll" === e.target.id) I(!E); else if ("checkbox" === e.target.type) { var c = z.map((function (e, c) { return t === c ? !e : e })); M(c), localStorage.setItem("checkedState", JSON.stringify(c)), b("/mail/".concat(i.pathname.split("/")[2])) } }; return Object(d.jsxs)("div", { className: "content inbox", children: [Object(d.jsx)("header", { className: "header", children: Object(d.jsx)("h2", { className: "title", children: "Inbox" }) }), Object(d.jsxs)("main", { className: "main", children: [Object(d.jsx)("div", { className: "mailbox-aside", children: Object(d.jsx)(Bc, { isTrash: T, checkedState: z, setMessages: y, setLoading: f, messages: v, user: t }) }), Object(d.jsx)("div", { className: "mailbox-content", children: "/mail/inbox" === i.pathname || "/mail/sent" === i.pathname || "/mail/unread" === i.pathname || "/mail/trash" === i.pathname ? Object(d.jsxs)(a.Fragment, { children: [Object(d.jsx)(Gc, { handleChange: L, checked: E, pathname: s, checkedState: z, messages: v }), Object(d.jsx)(ea, { children: O || !v ? Object(d.jsx)(Ze, {}) : v.map((function (e, c) { return Object(d.jsx)(Xc, { setCurrentMessage: k, handleChange: L, checkedState: z, message: e, index: c, userID: t.id }, c) })) })] }) : "message" === s ? Object(d.jsx)(Vc, {}) : Object(d.jsx)($c, { currentMessage: w, setMessages: y, setLoading: f }) })] })] }) }), ca = (c(48), c(49), c(50), c(51), c(52), c(53), c(54), function () { return Object(d.jsx)(l.e, { children: Object(d.jsxs)(l.c, { path: "/", element: Object(d.jsx)(Ye, {}), children: [Object(d.jsx)(l.c, { path: "shopping-cart", element: Object(d.jsx)(Jc, {}) }), Object(d.jsx)(l.c, { path: "search-result/not-found/:cardName", element: Object(d.jsx)(Yt, {}) }), Object(d.jsxs)(l.c, { element: Object(d.jsx)(Ke, {}), children: [Object(d.jsx)(l.c, { exact: !0, path: "/", element: Object(d.jsx)(pt, {}) }), Object(d.jsx)(l.c, { path: "about", element: Object(d.jsx)(xt, {}) }), Object(d.jsx)(l.c, { path: "contact", element: Object(d.jsx)(ft, {}) }), Object(d.jsx)(l.c, { path: "login", element: Object(d.jsx)(rt, {}) }), Object(d.jsx)(l.c, { path: "signup", element: Object(d.jsx)(ht, {}) }), Object(d.jsx)(l.c, { path: "reset-password", element: Object(d.jsx)(Ot, {}) }), Object(d.jsx)(l.c, { path: "search-result/catalog/:cardName", element: Object(d.jsx)(Qt, {}) })] }), Object(d.jsxs)(l.c, { element: Object(d.jsx)(Xe, {}), children: [Object(d.jsx)(l.c, { path: "me", exact: !0, element: Object(d.jsx)(l.a, { replace: !0, to: "../me/home" }) }), Object(d.jsx)(l.c, { path: "me/:path", element: Object(d.jsx)(tt, {}) }), Object(d.jsx)(l.c, { path: "settings", element: Object(d.jsx)(mt, {}) }), Object(d.jsx)(l.c, { path: "profile", element: Object(d.jsx)(gt, {}) }), Object(d.jsx)(l.c, { path: "search-result/catalog/:cardName/:userID", element: Object(d.jsx)(Qt, {}) }), Object(d.jsx)(l.c, { path: "search-result/collection/:query", element: Object(d.jsx)(Qt, {}) }), Object(d.jsx)(l.c, { path: "search-result/api/:cardName", element: Object(d.jsx)(Qt, {}) }), Object(d.jsx)(l.c, { path: "mail/inbox", element: Object(d.jsx)(ta, {}) }), Object(d.jsx)(l.c, { path: "mail/:handle/:handle", element: Object(d.jsx)(ta, {}) }), Object(d.jsx)(l.c, { path: "mail/unread", element: Object(d.jsx)(ta, {}) }), Object(d.jsx)(l.c, { path: "mail/sent", element: Object(d.jsx)(ta, {}) }), Object(d.jsx)(l.c, { path: "mail/trash", element: Object(d.jsx)(ta, {}) }), Object(d.jsx)(l.c, { path: "mail/message", element: Object(d.jsx)(ta, {}) })] }), Object(d.jsx)(l.c, { path: "*", element: Object(d.jsx)(Zt, {}) })] }) }) }); r.a.render(Object(d.jsx)(n.a.StrictMode, { children: Object(d.jsx)(i.a, { children: Object(d.jsx)(b, { children: Object(d.jsx)(O, { children: Object(d.jsx)(x, { children: Object(d.jsx)(v, { children: Object(d.jsx)(N, { children: Object(d.jsx)(l.e, { children: Object(d.jsx)(l.c, { path: "/*", element: Object(d.jsx)(ca, {}) }) }) }) }) }) }) }) }) }), document.getElementById("root")) } }, [[55, 1, 2]]]);
//# sourceMappingURL=main.4bab6c12.chunk.js.map